(()=>{var e={};e.id=416,e.ids=[416],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},2527:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),a(9217),a(809),a(5866),a(1590);var t=a(3191),r=a(8716),l=a(7922),i=a.n(l),o=a(5231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);a.d(s,n);let d=["",{children:["(authenticated)",{children:["dashboard",{children:["courses",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9217)),"C:\\Users\\huama\\Downloads\\bolt descomprimido\\project-bolt-sb1-emsbaasg\\project\\app\\(authenticated)\\dashboard\\courses\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,809)),"C:\\Users\\huama\\Downloads\\bolt descomprimido\\project-bolt-sb1-emsbaasg\\project\\app\\(authenticated)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,1590)),"C:\\Users\\huama\\Downloads\\bolt descomprimido\\project-bolt-sb1-emsbaasg\\project\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\huama\\Downloads\\bolt descomprimido\\project-bolt-sb1-emsbaasg\\project\\app\\(authenticated)\\dashboard\\courses\\[id]\\page.tsx"],u="/(authenticated)/dashboard/courses/[id]/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(authenticated)/dashboard/courses/[id]/page",pathname:"/dashboard/courses/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4005:(e,s,a)=>{Promise.resolve().then(a.bind(a,4239))},4239:(e,s,a)=>{"use strict";a.d(s,{default:()=>v});var t=a(326),r=a(7577),l=a(5047),i=a(772),o=a(567),n=a(6333),d=a(3734),c=a(5932),u=a(4432),m=a(1048),x=a(5442);let p=(0,a(6557).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var h=a(4019),b=a(2288),g=a(4474);let j=[{value:"ppt",label:"\uD83D\uDCCA Presentaci\xf3n (PPT)"},{value:"examen",label:"\uD83D\uDCDD Examen Pasado"},{value:"guia",label:"\uD83D\uDCDA Gu\xeda de Estudio"},{value:"otro",label:"\uD83D\uDCCE Otro Material"}];function f({courseId:e,onMaterialUploaded:s}){let[a,l]=(0,r.useState)(!1),[o,n]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),[f,v]=(0,r.useState)(""),[N,w]=(0,r.useState)("otro"),[y,C]=(0,r.useState)(""),D=async a=>{if(a.preventDefault(),!d||!f.trim()||!N){alert("Por favor completa todos los campos");return}n(!0);try{let a=d.name.split(".").pop(),t=`${Date.now()}-${Math.random().toString(36).slice(2)}.${a}`,{error:r}=await x.OQ.storage.from("course_materials").upload(t,d,{cacheControl:"3600",upsert:!1,contentType:d.type});if(r){console.error("Error al subir archivo:",r),alert(`Error al subir el archivo: ${r.message}`),n(!1);return}let{data:i}=x.OQ.storage.from("course_materials").getPublicUrl(t),o=i.publicUrl,{data:{user:u}}=await x.OQ.auth.getUser(),m=u?.id||"anonymous",{error:p}=await x.OQ.from("materials").insert({course_id:e,user_id:m,titulo:f.trim(),descripcion:y.trim()||null,url_archivo:o,tipo:N,descargas:0});if(p){console.error("Error al guardar material:",p),alert(`Error al guardar el material: ${p.message}`),n(!1);return}alert("\xa1Material subido exitosamente!"),l(!1),c(null),v(""),w("otro"),C(""),s()}catch(e){console.error("Error:",e),alert("Error al procesar el material")}finally{n(!1)}};return(0,t.jsxs)(b.Vq,{open:a,onOpenChange:l,children:[t.jsx(b.hg,{asChild:!0,children:(0,t.jsxs)(i.z,{className:"bg-blue-600 hover:bg-blue-700",children:[t.jsx(p,{className:"h-4 w-4 mr-2"}),"Subir Material"]})}),(0,t.jsxs)(b.cZ,{className:"sm:max-w-md",children:[(0,t.jsxs)(b.fK,{children:[t.jsx(b.$N,{children:"Subir Material del Curso"}),t.jsx(b.Be,{children:"Comparte un PPT, examen, gu\xeda u otro material con tus compa\xf1eros"})]}),(0,t.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx(m._,{htmlFor:"type",children:"Tipo de Material *"}),(0,t.jsxs)(g.Ph,{value:N,onValueChange:w,children:[t.jsx(g.i4,{className:"mt-2",children:t.jsx(g.ki,{})}),t.jsx(g.Bw,{children:j.map(e=>t.jsx(g.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{children:[t.jsx(m._,{htmlFor:"fileName",children:"Nombre del Material *"}),t.jsx(u.I,{id:"fileName",value:f,onChange:e=>v(e.target.value),placeholder:"Ej: Clase 01 - Introducci\xf3n",className:"mt-2",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx(m._,{htmlFor:"description",children:"Descripci\xf3n (Opcional)"}),t.jsx(u.I,{id:"description",value:y,onChange:e=>C(e.target.value),placeholder:"Describe brevemente el contenido",className:"mt-2"})]}),(0,t.jsxs)("div",{children:[t.jsx(m._,{htmlFor:"file",children:"Archivo *"}),(0,t.jsxs)("div",{className:"mt-2 border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors",children:[t.jsx("input",{id:"file",type:"file",onChange:e=>{let s=e.target.files?.[0];s&&(c(s),v(s.name))},className:"hidden",accept:".pdf,.ppt,.pptx,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.zip"}),(0,t.jsxs)("label",{htmlFor:"file",className:"cursor-pointer flex flex-col items-center gap-2",children:[t.jsx(p,{className:"h-8 w-8 text-slate-400"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium text-slate-700",children:"Haz clic para seleccionar"}),t.jsx("p",{className:"text-xs text-slate-500",children:"PDF, PPT, DOC, XLS, Im\xe1genes, ZIP"})]})]})]}),d&&(0,t.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-slate-700",children:["âœ“ ",d.name]}),t.jsx("button",{type:"button",onClick:()=>{c(null),v("")},className:"text-slate-500 hover:text-slate-700",children:t.jsx(h.Z,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[t.jsx(i.z,{type:"button",variant:"outline",onClick:()=>l(!1),className:"flex-1",children:"Cancelar"}),t.jsx(i.z,{type:"submit",disabled:o||!d,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:o?"Subiendo...":"Subir Material"})]})]})]})]})}function v({course:e,topProfessor:s,allProfessors:a,initialMaterials:u}){let m=(0,l.useRouter)(),[x,p]=(0,r.useState)(u),[h,b]=(0,r.useState)("presentaciones"),g=x.filter(e=>e.tipo?.toLowerCase().includes("ppt")||e.tipo?.toLowerCase().includes("presentacion")),j=x.filter(e=>e.tipo?.toLowerCase().includes("examen")),v=x.filter(e=>!e.tipo?.toLowerCase().includes("ppt")&&!e.tipo?.toLowerCase().includes("presentacion")&&!e.tipo?.toLowerCase().includes("examen")),N=[{id:"presentaciones",label:"\uD83D\uDCCA Presentaciones",count:g.length},{id:"examenes",label:"\uD83D\uDCDD Ex\xe1menes Pasados",count:j.length},{id:"otros",label:"\uD83D\uDCDA Otros Recursos",count:v.length}],w=e=>0===e.length?t.jsx("p",{className:"text-slate-500 text-center py-8",children:"No hay materiales en esta categor\xeda"}):t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:e.map(e=>{let s="bg-blue-50",a="border-blue-200",r="\uD83D\uDCCE";return"presentaciones"===h?(s="bg-orange-50",a="border-orange-200",r="\uD83D\uDCCA"):"examenes"===h&&(s="bg-red-50",a="border-red-200",r="\uD83D\uDCCB"),(0,t.jsxs)("a",{href:e.url_archivo,target:"_blank",rel:"noopener noreferrer",className:`p-4 ${s} rounded-lg hover:shadow-md transition-all border ${a} flex flex-col items-center gap-2 group cursor-pointer`,children:[t.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:r}),t.jsx("p",{className:"text-xs font-medium text-slate-700 text-center line-clamp-2 group-hover:text-slate-900",children:e.titulo})]},e.id)})});return(0,t.jsxs)("div",{className:"flex-1 overflow-auto bg-slate-50",children:[(0,t.jsxs)("div",{className:"relative h-64 bg-gradient-to-br from-blue-400 to-blue-600",children:[e.imagen_url?t.jsx("img",{src:e.imagen_url,alt:e.nombre,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 via-blue-500 to-teal-600"}),t.jsx(i.z,{variant:"outline",size:"icon",className:"absolute top-4 left-4 bg-white hover:bg-slate-100",onClick:()=>m.back(),children:t.jsx(n.Z,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8 max-w-full",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-blue-600 uppercase mb-2",children:e.codigo}),t.jsx("h1",{className:"text-4xl font-bold text-slate-900",children:e.nombre})]}),t.jsx(o.C,{className:"bg-green-50 text-green-700 border-0",children:"Abierto"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-slate-600 mb-6",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-semibold",children:"Facultad:"})," ",e.facultad]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-semibold",children:"Carrera:"})," ",e.carrera]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-semibold",children:"Ciclo:"})," ",e.ciclo]})]}),e.descripcion&&t.jsx("p",{className:"text-slate-600 leading-relaxed",children:e.descripcion})]}),(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-6",children:[t.jsx("div",{className:"flex gap-2 border-b border-slate-200 flex-1",children:N.map(e=>(0,t.jsxs)("button",{onClick:()=>b(e.id),className:`px-4 py-3 font-medium text-sm transition-all relative whitespace-nowrap ${h===e.id?"text-blue-600":"text-slate-600 hover:text-slate-900"}`,children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[e.label,t.jsx("span",{className:"bg-slate-200 text-slate-700 text-xs font-semibold px-2 py-0.5 rounded-full",children:e.count})]}),h===e.id&&t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600"})]},e.id))}),t.jsx(f,{courseId:e.id,onMaterialUploaded:()=>{m.refresh()}})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:["presentaciones"===h&&w(g),"examenes"===h&&w(j),"otros"===h&&w(v)]})]})]}),t.jsx("div",{className:"lg:col-span-1",children:(0,t.jsxs)("div",{className:"sticky top-8 space-y-6",children:[s?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 overflow-hidden",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-24"}),(0,t.jsxs)("div",{className:"px-6 pb-6",children:[t.jsx("div",{className:"-mt-12 mb-4",children:s.avatar_url?t.jsx("img",{src:s.avatar_url,alt:s.nombre,className:"w-20 h-20 rounded-full border-4 border-white object-cover"}):t.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-white bg-slate-300 flex items-center justify-center",children:t.jsx("span",{className:"text-2xl font-bold text-slate-600",children:s.nombre.charAt(0)})})}),t.jsx("h3",{className:"font-bold text-slate-900 text-lg mb-1",children:s.nombre}),t.jsx("p",{className:"text-xs text-slate-500 mb-3",children:s.especialidad}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("div",{className:"flex items-center",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>t.jsx(d.Z,{className:`h-4 w-4 ${a<Math.round(s.averageRating)?"fill-yellow-400 text-yellow-400":"text-slate-300"}`},a))}),t.jsx("span",{className:"text-sm font-semibold text-slate-900",children:s.averageRating.toFixed(1)})]}),(0,t.jsxs)(i.z,{className:"w-full bg-blue-600 hover:bg-blue-700 mb-3",children:[t.jsx(c.Z,{className:"h-4 w-4 mr-2"})," Contactar"]})]})]}):t.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md border border-slate-200",children:t.jsx("p",{className:"text-slate-500 text-center",children:"No hay profesores asignados"})}),a.length>1&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 p-6",children:[t.jsx("h4",{className:"font-semibold text-slate-900 mb-4",children:"Otros profesores"}),t.jsx("div",{className:"space-y-3",children:a.map(e=>e.id!==s?.id&&(0,t.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[t.jsx("p",{className:"font-medium text-sm text-slate-900",children:e.nombre}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:e.especialidad})]},e.id))})]})]})})]})})]})}},6333:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5932:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3734:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(6557).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},9217:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d,revalidate:()=>n});var t=a(9510);a(1159);var r=a(8585),l=a(1472);let i=(0,a(8570).createProxy)(String.raw`C:\Users\huama\Downloads\bolt descomprimido\project-bolt-sb1-emsbaasg\project\components\courses\CourseDetailContent.tsx#default`);var o=a(5662);let n=0;async function d({params:e}){let s=(0,l.e)(),a=e.id,{data:{session:n}}=await s.auth.getSession();n||(0,r.redirect)("/auth/login");let[d,c]=await Promise.all([(0,o.q4)(async()=>await s.from("courses").select("*").eq("id",a).single()),(0,o.q4)(async()=>await s.from("materials").select("*").eq("course_id",a).order("created_at",{ascending:!1}))]),u=d.data,m=c.data;u||(0,r.notFound)();let{data:x}=await (0,o.q4)(async()=>await s.from("course_professors").select("professor_id").eq("course_id",a)),p=null,h=[];if(x&&x.length>0){let e=x.map(e=>e.professor_id),{data:a}=await (0,o.q4)(async()=>await s.from("professors").select("*, professor_ratings(puntuacion)").in("id",e));a&&(p=(h=a.map(e=>{let s=e.professor_ratings||[],a=s.length>0?s.reduce((e,s)=>e+s.puntuacion,0)/s.length:0;return{...e,averageRating:a}})).reduce((e,s)=>e.averageRating>s.averageRating?e:s,h[0]))}return t.jsx(i,{course:u,topProfessor:p,allProfessors:h,initialMaterials:m||[]})}}};var s=require("../../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[890,167,961,414,456,95,909,495,924],()=>a(2527));module.exports=t})();