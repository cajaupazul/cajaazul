(()=>{var e={};e.id=662,e.ids=[662],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},6849:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>b,tree:()=>d}),t(1398),t(809),t(5866),t(7510);var s=t(3191),a=t(8716),l=t(7922),o=t.n(l),i=t(5231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(r,n);let d=["",{children:["(authenticated)",{children:["dashboard",{children:["grupos",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1398)),"C:\\Users\\huama\\Downloads\\bolt descomprimido\\project-bolt-sb1-emsbaasg\\project\\app\\(authenticated)\\dashboard\\grupos\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,809)),"C:\\Users\\huama\\Downloads\\bolt descomprimido\\project-bolt-sb1-emsbaasg\\project\\app\\(authenticated)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,7510)),"C:\\Users\\huama\\Downloads\\bolt descomprimido\\project-bolt-sb1-emsbaasg\\project\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\huama\\Downloads\\bolt descomprimido\\project-bolt-sb1-emsbaasg\\project\\app\\(authenticated)\\dashboard\\grupos\\[id]\\page.tsx"],x="/(authenticated)/dashboard/grupos/[id]/page",p={require:t,loadChunk:()=>Promise.resolve()},b=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(authenticated)/dashboard/grupos/[id]/page",pathname:"/dashboard/grupos/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5600:(e,r,t)=>{Promise.resolve().then(t.bind(t,9856))},9856:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g});var s=t(326),a=t(7577),l=t(5442),o=t(2710),i=t(1273),n=t(6333),d=t(8378),c=t(9730),x=t(4061),p=t(4738),b=t(8091),m=t(434),u=t(8758),h=t(5047);function g(){let e=(0,h.useRouter)(),r=(0,h.useParams)().id,{profile:t}=(0,o.U)(),{colors:g}=(0,i.F)(),[f,j]=(0,a.useState)(null),[y,v]=(0,a.useState)([]),[w,N]=(0,a.useState)(!0),[k,_]=(0,a.useState)(!1),[C,q]=(0,a.useState)(!1),[P,E]=(0,a.useState)(!1),[A,S]=(0,a.useState)({link_whatsapp:""}),[U,Z]=(0,a.useState)(null),[M,G]=(0,a.useState)({x:0,y:0}),z=(e,r)=>{let t=e.currentTarget.getBoundingClientRect(),s=window.innerWidth,a=t.right+10,l=t.top;a+320>s&&(a=t.left-320-10),l+280>window.innerHeight&&(l=window.innerHeight-280-20),Z(r),G({x:a,y:l})},D=async()=>{try{N(!0);let{data:e,error:s}=await l.OQ.from("grupos").select("*").eq("id",r).single();if(s)throw s;j(e),q(e.created_by===t?.id),S({link_whatsapp:e.link_whatsapp||""});let{data:a,error:o}=await l.OQ.from("grupo_miembros").select("user_id, joined_at").eq("grupo_id",r).order("joined_at",{ascending:!1});if(o)throw o;if(a&&a.length>0){let e=a.map(e=>e.user_id),{data:r,error:t}=await l.OQ.from("profiles").select("*, link_instagram").in("id",e);t&&console.error("Error cargando perfiles:",t);let s=a.map(e=>{let t=r?.find(r=>r.id===e.user_id);return console.log("Miembro:",e.user_id,"Perfil:",t),{...e,profile:t}});console.log("Miembros con info:",s),v(s)}else v([]);let i=a?.some(e=>e.user_id===t?.id);_(!!i)}catch(e){console.error("Error cargando grupo:",e)}finally{N(!1)}},$=async()=>{try{let{error:e}=await l.OQ.from("grupo_miembros").insert([{grupo_id:r,user_id:t?.id}]);if(e)throw e;_(!0),D()}catch(e){console.error("Error uni\xe9ndose:",e)}},Q=async()=>{try{let{error:e}=await l.OQ.from("grupo_miembros").delete().eq("grupo_id",r).eq("user_id",t?.id);if(e)throw e;_(!1),D()}catch(e){console.error("Error abandonando:",e)}},O=async()=>{try{let{error:e}=await l.OQ.from("grupos").update({link_whatsapp:A.link_whatsapp}).eq("id",r);if(e)throw e;j({...f,link_whatsapp:A.link_whatsapp}),E(!1)}catch(e){console.error("Error actualizando:",e)}},L=async()=>{if(window.confirm("\xbfEst\xe1s seguro de que deseas eliminar este grupo?"))try{let{error:t}=await l.OQ.from("grupos").delete().eq("id",r);if(t)throw t;e.push("/dashboard/grupos")}catch(e){console.error("Error eliminando:",e)}};return w?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:g?.primary}}),s.jsx("p",{className:"text-gray-400",children:"Cargando grupo..."})]})}):f?(0,s.jsxs)("div",{className:"min-h-screen bg-bb-dark",children:[(0,s.jsxs)("div",{className:"relative h-64 bg-gradient-to-r",style:{backgroundImage:f.banner_url?`url(${f.banner_url})`:void 0,backgroundSize:"cover",backgroundPosition:"center",backgroundColor:g?.primary+"40"},children:[s.jsx(m.default,{href:"/dashboard/grupos",className:"absolute top-6 left-6 p-2 rounded-lg bg-black bg-opacity-50 hover:bg-opacity-70 transition-all",children:s.jsx(n.Z,{className:"w-6 h-6 text-white"})}),C&&s.jsx("button",{onClick:()=>E(!0),className:"absolute top-6 right-6 p-2 rounded-lg bg-black bg-opacity-50 hover:bg-opacity-70 transition-all",children:s.jsx(d.Z,{className:"w-6 h-6 text-white"})})]}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 pb-12",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-8 -mt-20 relative z-10 mb-12",children:[s.jsx("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"flex gap-6 items-start",children:[s.jsx("div",{className:"w-32 h-32 rounded-xl flex items-center justify-center text-white font-bold flex-shrink-0 border-4 border-bb-dark shadow-xl",style:{backgroundImage:f.logo_url?`url(${f.logo_url})`:void 0,backgroundSize:"cover",backgroundColor:g?.primary},children:!f.logo_url&&f.nombre.charAt(0).toUpperCase()}),(0,s.jsxs)("div",{className:"flex-1 pt-4",children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-2 shadow-sm",children:f.nombre}),s.jsx("p",{className:"text-lg text-gray-200 mb-4 font-medium",children:f.tipo}),f.descripcion&&s.jsx("p",{className:"text-gray-100 text-base leading-relaxed line-clamp-3 font-medium",children:f.descripcion})]})]})}),s.jsx("div",{className:"flex flex-col gap-3",children:k?(0,s.jsxs)(s.Fragment,{children:[f.link_whatsapp&&(0,s.jsxs)("a",{href:f.link_whatsapp,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 rounded-lg bg-green-500 hover:bg-green-600 text-white font-semibold transition-all w-full md:w-auto",children:[s.jsx(c.Z,{className:"w-5 h-5"}),s.jsx("span",{children:"Ir a WhatsApp"})]}),s.jsx("button",{onClick:Q,className:"px-6 py-3 rounded-lg bg-red-500 bg-opacity-20 hover:bg-opacity-30 text-red-400 font-semibold transition-all",children:"Abandonar Grupo"})]}):s.jsx("button",{onClick:$,className:"px-6 py-3 rounded-lg text-white font-semibold transition-all",style:{backgroundColor:g?.primary},children:"Unirse al Grupo"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-1 order-2 lg:order-2",children:(0,s.jsxs)("div",{className:"bg-bb-card rounded-xl p-6 border border-bb-border",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(x.Z,{className:"w-5 h-5",style:{color:g?.primary}}),(0,s.jsxs)("h2",{className:"text-xl font-bold text-bb-text",children:["Miembros (",y.length,")"]})]}),s.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:y.map(e=>{let r=f.created_by===e.user_id,t=e.profile;return(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-bb-hover transition-all cursor-pointer",onMouseEnter:r=>z(r,e.user_id),onMouseLeave:()=>Z(null),children:(0,s.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,s.jsxs)(u.qE,{className:"w-10 h-10 flex-shrink-0",children:[s.jsx(u.F$,{src:t?.avatar_url||"",alt:t?.nombre||"Usuario"}),s.jsx(u.Q5,{style:{backgroundColor:g?.primary},children:t?.nombre?.charAt(0).toUpperCase()||"U"})]}),(0,s.jsxs)("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-bb-text truncate",children:t?.nombre||"Usuario"}),r&&s.jsx("span",{className:"text-xs text-blue-400 font-semibold",children:"Admin"})]})]})}),U===e.user_id&&(0,s.jsxs)("div",{className:"fixed bg-bb-card border border-bb-border rounded-xl shadow-2xl z-50 w-64 overflow-hidden animate-in fade-in zoom-in-95 duration-200",style:{left:`${M.x+20}px`,top:`${M.y}px`},children:[s.jsx("div",{className:"h-20 bg-cover bg-center relative",style:{backgroundImage:t?.background_url?`url('${t.background_url}')`:`linear-gradient(135deg, ${g?.primary}40, ${g?.secondary}40)`,backgroundColor:g?.primary+"20"},children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-bb-card/80 to-transparent"})}),(0,s.jsxs)("div",{className:"px-4 pb-4 relative",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center -mt-10",children:[(0,s.jsxs)(u.qE,{className:"w-20 h-20 ring-4 ring-bb-card shadow-lg",children:[s.jsx(u.F$,{src:t?.avatar_url||"",alt:t?.nombre||"Usuario"}),s.jsx(u.Q5,{style:{backgroundColor:g?.primary},children:t?.nombre?.charAt(0).toUpperCase()||"U"})]}),(0,s.jsxs)("div",{className:"text-center mt-2 w-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("h3",{className:"text-lg font-bold text-bb-text truncate leading-tight",children:t?.nombre||"Usuario"}),t?.link_instagram&&s.jsx("a",{href:t.link_instagram.startsWith("http")?t.link_instagram:`https://instagram.com/${t.link_instagram}`,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 hover:scale-110 transition-transform",onClick:e=>e.stopPropagation(),children:s.jsx(p.Z,{className:"w-4 h-4 text-pink-500"})})]}),t?.carrera&&s.jsx("p",{className:"text-xs text-bb-text-secondary mt-0.5 truncate",children:t.carrera}),r&&s.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 rounded-full text-[10px] font-bold bg-blue-500/20 text-blue-400 border border-blue-500/30",children:"Administrador"})]})]}),t?.bio&&s.jsx("div",{className:"mt-3 pt-3 border-t border-bb-border",children:(0,s.jsxs)("p",{className:"text-xs text-bb-text-secondary italic line-clamp-2 text-center",children:['"',t.bio,'"']})}),(0,s.jsxs)("div",{className:"mt-3 flex justify-between items-center text-[10px] text-bb-text-secondary opacity-70",children:[s.jsx("span",{children:"Se uni\xf3"}),s.jsx("span",{children:new Date(e.joined_at).toLocaleDateString("es-ES",{month:"short",year:"numeric"})})]})]})]})]},e.user_id)})})]})}),s.jsx("div",{className:"lg:col-span-2 order-1 lg:order-1",children:(0,s.jsxs)("div",{className:"bg-bb-card rounded-xl p-6 border border-bb-border",children:[s.jsx("h2",{className:"text-xl font-bold text-bb-text mb-4",children:"Detalles del Grupo"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-bb-text-secondary mb-2",children:"Tipo de Grupo"}),s.jsx("p",{className:"text-lg text-bb-text font-semibold",children:f.tipo})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-bb-text-secondary mb-2",children:"Creado el"}),s.jsx("p",{className:"text-bb-text",children:new Date(f.created_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]}),f.link_whatsapp&&(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-bb-text-secondary mb-2",children:"Grupo de WhatsApp"}),s.jsx("a",{href:f.link_whatsapp,target:"_blank",rel:"noopener noreferrer",className:"text-green-400 hover:text-green-300 break-all",children:f.link_whatsapp})]}),C&&(0,s.jsxs)("div",{className:"pt-6 border-t border-gray-700",children:[(0,s.jsxs)("button",{onClick:()=>E(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white font-semibold transition-all mb-3",children:[s.jsx(d.Z,{className:"w-4 h-4"}),"Editar Link WhatsApp"]}),(0,s.jsxs)("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-red-500 hover:bg-red-600 text-white font-semibold transition-all",children:[s.jsx(b.Z,{className:"w-4 h-4"}),"Eliminar Grupo"]})]})]})]})})]})]}),P&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-bb-card rounded-xl w-full max-w-md border border-bb-border",children:(0,s.jsxs)("div",{className:"p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-bb-text mb-4",children:"Editar Link WhatsApp"}),(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-semibold text-bb-text mb-2",children:"Link de WhatsApp"}),s.jsx("input",{type:"url",value:A.link_whatsapp,onChange:e=>S({...A,link_whatsapp:e.target.value}),placeholder:"https://chat.whatsapp.com/...",className:"w-full px-4 py-2 rounded-lg bg-bb-darker border border-bb-border text-bb-text placeholder:text-bb-text-secondary focus:outline-none focus:border-gray-500"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>E(!1),className:"flex-1 px-4 py-2 rounded-lg border border-bb-border text-bb-text-secondary font-semibold hover:border-bb-border/80 transition-all",children:"Cancelar"}),s.jsx("button",{onClick:O,className:"flex-1 px-4 py-2 rounded-lg text-white font-semibold transition-all",style:{backgroundColor:g?.primary},children:"Guardar"})]})]})})})]}):s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("p",{className:"text-gray-400",children:"Grupo no encontrado"})})}},6333:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(6557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},4738:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(6557).Z)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},9730:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(6557).Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]])},8091:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=(0,t(6557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1398:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(8570).createProxy)(String.raw`C:\Users\huama\Downloads\bolt descomprimido\project-bolt-sb1-emsbaasg\project\app\(authenticated)\dashboard\grupos\[id]\page.tsx#default`)}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[162,167,721,414,588],()=>t(6849));module.exports=s})();