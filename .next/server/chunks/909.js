exports.id=909,exports.ids=[909],exports.modules={1346:(e,r,t)=>{Promise.resolve().then(t.bind(t,1813)),Promise.resolve().then(t.bind(t,4121)),Promise.resolve().then(t.bind(t,1273))},2002:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},772:(e,r,t)=>{"use strict";t.d(r,{z:()=>c});var a=t(326),s=t(7577),o=t(5289),i=t(9360),n=t(7863);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-gray-200 bg-white hover:bg-gray-50 text-gray-900",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100 hover:text-gray-900",link:"text-blue-600 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3 text-xs",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef(({className:e,variant:r,size:t,asChild:s=!1,...i},c)=>{let d=s?o.g7:"button";return a.jsx(d,{className:(0,n.cn)(l({variant:r,size:t,className:e})),ref:c,...i})});c.displayName="Button"},1813:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>l,a:()=>c});var a=t(326),s=t(7577),o=t(5442),i=t(5047);let n=(0,s.createContext)(void 0);function l({children:e}){let[r,t]=(0,s.useState)(null),[l,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(!0),b=(0,i.useRouter)(),g=async(e,r)=>{try{console.log("[Auth] Cargando perfil en background...");let{data:t,error:a}=await o.OQ.from("profiles").select("*").eq("id",e).single();if(a){console.error("[Auth] Error al cargar perfil:",a.message),"PGRST116"===a.code&&(console.log("[Auth] Perfil no existe. Creando..."),await p(e,r));return}t&&(console.log("[Auth] ✅ Perfil cargado:",t.nombre),u(t))}catch(e){console.error("[Auth] Error inesperado:",e)}},p=async(e,r)=>{try{let t=r.user_metadata,a={id:e,nombre:t?.nombre||r.email?.split("@")[0]||"Usuario",universidad:t?.universidad||"Universidad Privada",carrera:t?.carrera||"Estudiante",puntos:0},{data:s,error:i}=await o.OQ.from("profiles").insert([a]).select().single();if(i){console.error("[Auth] Error creando perfil:",i);return}console.log("[Auth] ✅ Perfil creado:",s.nombre),u(s)}catch(e){console.error("[Auth] Error al crear perfil:",e)}},f=async()=>{r&&await g(r.id,r)},y=async e=>{u(e)},v=async()=>{try{console.log("[Auth] Cerrando sesi\xf3n..."),await o.OQ.auth.signOut(),localStorage.clear(),sessionStorage.clear(),b.push("/auth/login")}catch(e){console.error("[Auth] Error en signOut:",e)}};return a.jsx(n.Provider,{value:{user:r,session:l,profile:d,loading:m,signOut:v,refreshProfile:f,updateProfile:y},children:e})}function c(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4121:(e,r,t)=>{"use strict";t.d(r,{DashboardDataProvider:()=>l,r:()=>c});var a=t(326),s=t(7577),o=t(5442),i=t(1813);let n=(0,s.createContext)(void 0);function l({children:e}){let{session:r}=(0,i.a)(),[t,l]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[u,m]=(0,s.useState)([]),[h,b]=(0,s.useState)(new Set),[g,p]=(0,s.useState)({});(0,s.useRef)(!1);let[f,y]=(0,s.useState)({courses:!1,professors:!1,grupos:!1}),v=(0,s.useCallback)(async()=>{if(r){y(e=>({...e,courses:!0}));try{let{data:e,error:r}=await (0,o.q4)(async()=>await o.OQ.from("courses").select("*").order("nombre",{ascending:!0}));!r&&e&&l(e)}finally{y(e=>({...e,courses:!1}))}}},[r]),x=(0,s.useCallback)(async()=>{if(r){y(e=>({...e,professors:!0}));try{let{data:e,error:r}=await (0,o.q4)(async()=>await o.OQ.from("professors").select(`
                      *,
                      professor_ratings (puntuacion)
                    `).order("nombre",{ascending:!0}));if(!r&&e){let r=e.map(e=>{let r=e.professor_ratings||[],t=r.length>0?r.reduce((e,r)=>e+(r.puntuacion||0),0)/r.length:0;return{...e,averageRating:Math.round(10*t)/10,ratingCount:r.length}});d(r)}}finally{y(e=>({...e,professors:!1}))}}},[r]),w=(0,s.useCallback)(async()=>{if(r){y(e=>({...e,grupos:!0}));try{let{data:e,error:r}=await (0,o.q4)(async()=>await o.OQ.from("grupos").select(`
                      *,
                      grupo_miembros(count)
                    `).order("created_at",{ascending:!1}));if(!r&&e){m(e);let r={};e.forEach(e=>{r[e.id]=e.grupo_miembros?.[0]?.count||0}),p(r)}}finally{y(e=>({...e,grupos:!1}))}}},[r]),F=(0,s.useCallback)(async e=>{if(e&&r)try{let{data:r,error:t}=await o.OQ.from("grupo_miembros").select("grupo_id").eq("user_id",e);!t&&r&&b(new Set(r.map(e=>e.grupo_id)))}catch(e){console.error("Error fetching user groups:",e)}},[r]),C=(0,s.useCallback)(async e=>{r&&await Promise.all([v(),x(),w(),e||r.user.id?F(e||r.user.id):Promise.resolve()])},[r,v,x,w,F]),P=(0,s.useMemo)(()=>({courses:t,professors:c,grupos:u,userGrupos:h,miembrosCuenta:g,loading:f,fetchCourses:v,fetchProfessors:x,fetchGrupos:w,fetchUserGrupos:F,refreshAll:C}),[t,c,u,h,g,f,v,x,w,F,C]);return a.jsx(n.Provider,{value:P,children:e})}function c(){let e=(0,s.useContext)(n);if(!e)throw Error("useDashboardData must be used within DashboardDataProvider");return e}},5442:(e,r,t)=>{"use strict";t.d(r,{OQ:()=>a,q4:()=>s});let a=(0,t(5847).createBrowserClient)("https://mevfhlhwrrkbhppgeyaj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1ldmZobGh3cnJrYmhwcGdleWFqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5NDgyMDIsImV4cCI6MjA3NzUyNDIwMn0.E_Rhnhh8dbRiBLTg52HpDfJSqv2Q_hE-mSjHlkLF2IE");async function s(e){return await e()}},1273:(e,r,t)=>{"use strict";t.d(r,{F:()=>n,ThemeProvider:()=>l});var a=t(326),s=t(7577);t(5442);let o={"Facultad de Ciencias Empresariales":{primary:"#0066FF",secondary:"#E6F0FF",dark:"#0052CC",light:"#F0F7FF"},"Facultad de Derecho":{primary:"#FF0000",secondary:"#FFE6E6",dark:"#CC0000",light:"#FFF0F0"},"Facultad de Econom\xeda y Finanzas":{primary:"#00CC00",secondary:"#E6FFE6",dark:"#009900",light:"#F0FFF0"},"Facultad de Ingenier\xeda":{primary:"#FFCC00",secondary:"#FFFAE6",dark:"#CC9900",light:"#FFFBF0"}},i=(0,s.createContext)({faculty:null,colors:null,setFaculty:()=>{},loading:!0,themeMode:"glass",setThemeMode:()=>{}}),n=()=>(0,s.useContext)(i);function l({children:e}){let[r,t]=(0,s.useState)(null),[n,l]=(0,s.useState)(!0),[c,d]=(0,s.useState)("glass"),u=r&&r in o?o[r]:o["Facultad de Ciencias Empresariales"];return a.jsx(i.Provider,{value:{faculty:r,colors:u,setFaculty:e=>{t(e)},loading:n,themeMode:c,setThemeMode:e=>{d(e),localStorage.setItem("themeMode",e),document.documentElement.setAttribute("data-theme",e)}},children:e})}},7863:(e,r,t)=>{"use strict";t.d(r,{cn:()=>o});var a=t(1135),s=t(1009);function o(...e){return(0,s.m6)((0,a.W)(e))}},1590:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c,metadata:()=>l});var a=t(9510),s=t(8570);let o=(0,s.createProxy)(String.raw`C:\Users\huama\Downloads\bolt descomprimido\project-bolt-sb1-emsbaasg\project\lib\auth-context.tsx#AuthProvider`);(0,s.createProxy)(String.raw`C:\Users\huama\Downloads\bolt descomprimido\project-bolt-sb1-emsbaasg\project\lib\auth-context.tsx#useAuth`),(0,s.createProxy)(String.raw`C:\Users\huama\Downloads\bolt descomprimido\project-bolt-sb1-emsbaasg\project\lib\theme-context.tsx#FACULTY_COLORS`),(0,s.createProxy)(String.raw`C:\Users\huama\Downloads\bolt descomprimido\project-bolt-sb1-emsbaasg\project\lib\theme-context.tsx#useTheme`);let i=(0,s.createProxy)(String.raw`C:\Users\huama\Downloads\bolt descomprimido\project-bolt-sb1-emsbaasg\project\lib\theme-context.tsx#ThemeProvider`),n=(0,s.createProxy)(String.raw`C:\Users\huama\Downloads\bolt descomprimido\project-bolt-sb1-emsbaasg\project\lib\dashboard-data-context.tsx#DashboardDataProvider`);(0,s.createProxy)(String.raw`C:\Users\huama\Downloads\bolt descomprimido\project-bolt-sb1-emsbaasg\project\lib\dashboard-data-context.tsx#useDashboardData`),t(7272);let l={title:"CampusLink - Plataforma Premium",description:"Plataforma educativa premium para gesti\xf3n de cursos"};function c({children:e}){return(0,a.jsxs)("html",{lang:"es",children:[a.jsx("head",{children:a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"})}),a.jsx("body",{className:"bg-bb-dark text-bb-text antialiased",children:a.jsx(o,{children:a.jsx(i,{children:a.jsx(n,{children:e})})})})]})}},7272:()=>{}};