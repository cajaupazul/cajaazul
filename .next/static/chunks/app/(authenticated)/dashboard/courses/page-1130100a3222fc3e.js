(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[983],{9779:function(e,t,r){Promise.resolve().then(r.bind(r,8034))},8034:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var a=r(7437),s=r(2265),o=r(9376),l=r(4991),n=r(2869),i=r(5186),c=r(5974),d=r(6815),u=r(9397),b=r(3247),m=r(2141),f=r(3647),x=r(6110);let h=["Facultad de Ciencias Empresariales","Facultad de Derecho","Facultad de Econom\xeda y Finanzas","Facultad de Ingenier\xeda"],g=Array.from({length:13},(e,t)=>t.toString());function p(){let[e,t]=(0,s.useState)([]),[r,p]=(0,s.useState)(""),[v,y]=(0,s.useState)("todos"),[j,N]=(0,s.useState)("todos"),[w,C]=(0,s.useState)(!0),[k,I]=(0,s.useState)([]),[S]=(0,s.useState)(25),[_,E]=(0,s.useState)(!1),[z,P]=(0,s.useState)(!1),[R,Z]=(0,s.useState)(""),Q=(0,o.useRouter)(),[O,D]=(0,s.useState)({nombre:"",codigo:"",facultad:"",ciclo:"",descripcion:"",imagen:null}),{profile:F,loading:V}=(0,l.U)();(0,s.useEffect)(()=>{A(),V||F||Q.push("/auth/login");let e=setTimeout(()=>C(!1),3e3);return()=>clearTimeout(e)},[F,V,Q]);let A=async()=>{try{0===e.length&&C(!0);let{data:r,error:a}=await m.OQ.from("courses").select("*").order("nombre",{ascending:!0});a?(console.error("Error fetching courses:",a),t([])):(console.log("Courses fetched:",r),t(r||[]))}catch(e){console.error("Catch error:",e),t([])}finally{C(!1)}},q=async e=>{if(e.preventDefault(),!O.nombre.trim()||!O.codigo.trim()||!O.facultad||!O.ciclo){alert("Por favor completa los campos requeridos");return}P(!0);let t="";try{if(O.imagen){if(!O.imagen.type.startsWith("image/")){alert("Por favor selecciona un archivo de imagen v\xe1lido"),P(!1);return}let e=O.imagen.name.split(".").pop(),r="".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2),".").concat(e),{error:a}=await m.OQ.storage.from("course_images").upload(r,O.imagen,{cacheControl:"3600",upsert:!1,contentType:O.imagen.type});if(a){alert("Error al subir la imagen: ".concat(a.message)),P(!1);return}let{data:s}=m.OQ.storage.from("course_images").getPublicUrl(r);t=s.publicUrl}let{error:e}=await m.OQ.from("courses").insert({nombre:O.nombre.trim().toUpperCase(),codigo:O.codigo.trim().toUpperCase(),facultad:O.facultad,ciclo:parseInt(O.ciclo),descripcion:O.descripcion.trim()||null,carrera:"Ingenier\xeda de Sistemas",imagen_url:t||null});if(e){alert("Error al crear el curso: ".concat(e.message)),P(!1);return}E(!1),D({nombre:"",codigo:"",facultad:"",ciclo:"",descripcion:"",imagen:null}),Z(""),await A(),alert("\xa1Curso creado exitosamente!")}catch(e){console.error("Error general:",e),alert("Error al crear el curso")}finally{P(!1)}},B=e.filter(e=>{var t,a;let s=e.nombre.toLowerCase().includes(r.toLowerCase())||(null===(t=e.codigo)||void 0===t?void 0:t.toLowerCase().includes(r.toLowerCase())),o="todos"===v||(null===(a=e.ciclo)||void 0===a?void 0:a.toString())===v,l="todos"===j||e.carrera===j;return s&&o&&l}),U=e=>{I(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},L=Array.from(new Set(e.map(e=>e.ciclo))).sort(),J=Array.from(new Set(e.map(e=>e.carrera)));return w?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-bb-dark",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,a.jsxs)("div",{className:"flex-1 overflow-auto p-8 bg-bb-dark transition-colors duration-300",children:[(0,a.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-bb-text",children:"Cursos"}),(0,a.jsxs)("p",{className:"text-bb-text-secondary mt-2",children:[B.length," ",1===B.length?"curso":"cursos"," disponibles"]})]}),(0,a.jsxs)(x.Vq,{open:_,onOpenChange:E,children:[(0,a.jsx)(x.hg,{asChild:!0,children:(0,a.jsxs)(n.z,{className:"bg-blue-600 hover:bg-blue-700 h-11 text-white shadow-lg shadow-blue-500/20",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Agregar Curso"]})}),(0,a.jsxs)(x.cZ,{className:"bg-bb-card border-bb-border text-bb-text max-w-md max-h-screen overflow-y-auto",children:[(0,a.jsxs)(x.fK,{children:[(0,a.jsx)(x.$N,{children:"Agregar Nuevo Curso"}),(0,a.jsx)(x.Be,{className:"text-bb-text-secondary",children:"Completa los datos del nuevo curso"})]}),(0,a.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{htmlFor:"nombre",className:"text-bb-text",children:"Nombre del Curso *"}),(0,a.jsx)(i.I,{id:"nombre",value:O.nombre,onChange:e=>D({...O,nombre:e.target.value.toUpperCase()}),placeholder:"Ej: Algoritmos y Estructuras de Datos",required:!0,className:"mt-2 bg-bb-darker border-bb-border text-bb-text"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{htmlFor:"codigo",className:"text-bb-text",children:"C\xf3digo del Curso *"}),(0,a.jsx)(i.I,{id:"codigo",value:O.codigo,onChange:e=>D({...O,codigo:e.target.value.toUpperCase()}),placeholder:"Ej: CS101",required:!0,className:"mt-2 bg-bb-darker border-bb-border text-bb-text",maxLength:10})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{htmlFor:"facultad",className:"text-bb-text",children:"Facultad *"}),(0,a.jsxs)(f.Ph,{value:O.facultad,onValueChange:e=>D({...O,facultad:e}),children:[(0,a.jsx)(f.i4,{className:"mt-2 bg-bb-darker border-bb-border text-bb-text",children:(0,a.jsx)(f.ki,{placeholder:"Selecciona una facultad"})}),(0,a.jsx)(f.Bw,{className:"bg-bb-card border-bb-border text-bb-text",children:h.map(e=>(0,a.jsx)(f.Ql,{value:e,className:"focus:bg-bb-hover focus:text-bb-text",children:e},e))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{htmlFor:"ciclo",className:"text-bb-text",children:"Ciclo *"}),(0,a.jsxs)(f.Ph,{value:O.ciclo,onValueChange:e=>D({...O,ciclo:e}),children:[(0,a.jsx)(f.i4,{className:"mt-2 bg-bb-darker border-bb-border text-bb-text",children:(0,a.jsx)(f.ki,{placeholder:"Selecciona un ciclo"})}),(0,a.jsx)(f.Bw,{className:"bg-bb-card border-bb-border text-bb-text",children:g.map(e=>(0,a.jsxs)(f.Ql,{value:e,className:"focus:bg-bb-hover focus:text-bb-text",children:["Ciclo ",e]},e))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{htmlFor:"descripcion",className:"text-bb-text",children:"Descripci\xf3n"}),(0,a.jsx)(i.I,{id:"descripcion",value:O.descripcion,onChange:e=>D({...O,descripcion:e.target.value}),placeholder:"Descripci\xf3n del curso (opcional)",className:"mt-2 bg-bb-darker border-bb-border text-bb-text"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{htmlFor:"imagen",className:"text-bb-text",children:"Imagen del Curso"}),(0,a.jsx)(i.I,{id:"imagen",type:"file",accept:"image/*",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){D({...O,imagen:r});let e=new FileReader;e.onloadend=()=>{Z(e.result)},e.readAsDataURL(r)}},className:"mt-2 bg-bb-darker border-bb-border text-bb-text"}),R&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:R,alt:"Preview",className:"h-24 w-full object-cover rounded"})}),O.imagen&&(0,a.jsxs)("p",{className:"text-xs text-green-500 mt-1",children:["✓ Imagen seleccionada: ",O.imagen.name]})]}),(0,a.jsx)(n.z,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:z,children:z?"Creando...":"Agregar Curso"})]})]})]})]}),(0,a.jsxs)("div",{className:"mb-6 relative",children:[(0,a.jsx)(b.Z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-bb-text-secondary h-5 w-5"}),(0,a.jsx)(i.I,{placeholder:"Busque sus cursos",value:r,onChange:e=>p(e.target.value),className:"pl-12 py-6 text-base bg-bb-card border-bb-border text-bb-text rounded-lg shadow-sm placeholder:text-bb-text-secondary/50"})]}),(0,a.jsxs)("div",{className:"mb-8 flex flex-wrap gap-4 items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-bb-text-secondary",children:"Per\xedodos"}),(0,a.jsxs)(f.Ph,{value:v,onValueChange:y,children:[(0,a.jsx)(f.i4,{className:"w-40 bg-bb-card border-bb-border text-bb-text",children:(0,a.jsx)(f.ki,{placeholder:"Todos los per\xedodos"})}),(0,a.jsxs)(f.Bw,{className:"bg-bb-card border-bb-border text-bb-text",children:[(0,a.jsx)(f.Ql,{value:"todos",className:"focus:bg-bb-hover focus:text-bb-text",children:"Todos los per\xedodos"}),L.map(e=>(0,a.jsxs)(f.Ql,{value:(null==e?void 0:e.toString())||"otros",className:"focus:bg-bb-hover focus:text-bb-text",children:["Ciclo ",e]},e))]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-bb-text-secondary",children:"Filtros"}),(0,a.jsxs)(f.Ph,{value:j,onValueChange:N,children:[(0,a.jsx)(f.i4,{className:"w-40 bg-bb-card border-bb-border text-bb-text",children:(0,a.jsx)(f.ki,{placeholder:"Todas las carreras"})}),(0,a.jsxs)(f.Bw,{className:"bg-bb-card border-bb-border text-bb-text",children:[(0,a.jsx)(f.Ql,{value:"todos",className:"focus:bg-bb-hover focus:text-bb-text",children:"Todas las carreras"}),J.map(e=>(0,a.jsx)(f.Ql,{value:e||"otros",className:"focus:bg-bb-hover focus:text-bb-text",children:e},e))]})]})]}),(0,a.jsxs)("span",{className:"text-sm text-bb-text-secondary ml-auto",children:[Math.min(S,B.length)," de ",B.length," elementos"]})]}),B.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:B.map(e=>(0,a.jsxs)("div",{className:"group cursor-pointer overflow-hidden rounded-lg shadow-md glass-card transition-all hover:shadow-lg hover:border-blue-500/30",onClick:()=>Q.push("/dashboard/courses/".concat(e.id)),children:[(0,a.jsx)("div",{className:"relative h-40 overflow-hidden bg-gradient-to-br from-blue-400 to-blue-600",children:e.imagen_url?(0,a.jsx)("img",{src:e.imagen_url,alt:e.nombre,className:"h-full w-full object-cover transition-transform group-hover:scale-105"}):(0,a.jsx)("div",{className:"h-full w-full bg-gradient-to-br from-blue-400 via-blue-500 to-teal-600 transition-transform group-hover:scale-105"})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("span",{className:"text-xs font-semibold text-bb-text-secondary uppercase",children:e.codigo}),(0,a.jsx)("h3",{className:"mt-2 line-clamp-2 text-sm font-bold text-bb-text group-hover:text-blue-400 transition-colors",children:e.nombre}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-bb-text-secondary space-y-1",children:[e.carrera&&(0,a.jsx)("div",{children:e.carrera}),e.ciclo&&(0,a.jsxs)("div",{children:["Ciclo ",e.ciclo]})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-between pt-3 border-t border-bb-border",children:[(0,a.jsx)(c.C,{variant:"secondary",className:"bg-green-500/10 text-green-500 border-green-500/20",children:"Abierto"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),U(e.id)},className:"text-lg transition-colors ".concat(k.includes(e.id)?"text-yellow-400":"text-bb-text-secondary hover:text-yellow-400"),"aria-label":"Guardar curso",children:"★"}),(0,a.jsx)(n.z,{size:"sm",variant:"ghost",onClick:t=>{t.stopPropagation(),Q.push("/dashboard/courses/".concat(e.id))},className:"text-blue-500 hover:bg-blue-500/10 hover:text-blue-400",children:"Ver m\xe1s"})]})]})]})]},e.id))}):(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-bb-text-secondary text-lg",children:r?"No se encontraron cursos":"No hay cursos disponibles"})})]})}},5974:function(e,t,r){"use strict";r.d(t,{C:function(){return n}});var a=r(7437);r(2265);var s=r(535),o=r(4508);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-blue-100 text-blue-800",secondary:"border-transparent bg-gray-100 text-gray-800",destructive:"border-transparent bg-red-100 text-red-800",outline:"text-gray-950 border-gray-200"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)(l({variant:r}),t),...s})}},2869:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var a=r(7437),s=r(2265),o=r(6791),l=r(535),n=r(4508);let i=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-gray-200 bg-white hover:bg-gray-50 text-gray-900",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100 hover:text-gray-900",link:"text-blue-600 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3 text-xs",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:c=!1,...d}=e,u=c?o.g7:"button";return(0,a.jsx)(u,{className:(0,n.cn)(i({variant:s,size:l,className:r})),ref:t,...d})});c.displayName="Button"},6110:function(e,t,r){"use strict";r.d(t,{$N:function(){return x},Be:function(){return h},Vq:function(){return i},cN:function(){return f},cZ:function(){return b},fK:function(){return m},hg:function(){return c}});var a=r(7437),s=r(2265),o=r(3240),l=r(2489),n=r(4508);let i=o.fC,c=o.xz,d=o.h_;o.x8;let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.aV,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});u.displayName=o.aV.displayName;let b=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(o.VY,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-gray-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...i,children:[s,(0,a.jsxs)(o.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:pointer-events-none",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});b.displayName=o.VY.displayName;let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};m.displayName="DialogHeader";let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};f.displayName="DialogFooter";let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.Dx,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});x.displayName=o.Dx.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.dk,{ref:t,className:(0,n.cn)("text-sm text-gray-500",r),...s})});h.displayName=o.dk.displayName},5186:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var a=r(7437),s=r(2265),o=r(4508);let l=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:(0,o.cn)("flex h-10 w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm text-gray-950 placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});l.displayName="Input"},6815:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var a=r(7437),s=r(2265),o=r(6394),l=r(535),n=r(4508);let i=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.f,{ref:t,className:(0,n.cn)(i(),r),...s})});c.displayName=o.f.displayName},3647:function(e,t,r){"use strict";r.d(t,{Bw:function(){return x},Ph:function(){return d},Ql:function(){return h},i4:function(){return b},ki:function(){return u}});var a=r(7437),s=r(2265),o=r(7512),l=r(875),n=r(2135),i=r(401),c=r(4508);let d=o.fC;o.ZA;let u=o.B4,b=s.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsxs)(o.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...n,children:[s,(0,a.jsx)(o.JO,{asChild:!0,children:(0,a.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]})});b.displayName=o.xz.displayName;let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.u_,{ref:t,className:(0,c.cn)("flex cursor-pointer items-center justify-center py-1",r),...s,children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})});m.displayName=o.u_.displayName;let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.$G,{ref:t,className:(0,c.cn)("flex cursor-pointer items-center justify-center py-1",r),...s,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})});f.displayName=o.$G.displayName;let x=s.forwardRef((e,t)=>{let{className:r,children:s,position:l="popper",...n}=e;return(0,a.jsx)(o.h_,{children:(0,a.jsxs)(o.VY,{ref:t,className:(0,c.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white text-gray-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...n,children:[(0,a.jsx)(m,{}),(0,a.jsx)(o.l_,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(f,{})]})})});x.displayName=o.VY.displayName;let h=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(o.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(o.wU,{children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(o.eT,{children:s})]})});h.displayName=o.ck.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-gray-100",r),...s})}).displayName=o.Z0.displayName},4991:function(e,t,r){"use strict";r.d(t,{ProfileProvider:function(){return n},U:function(){return i}});var a=r(7437),s=r(2265),o=r(2141);let l=(0,s.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,s.useState)(null),[i,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(null),b=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=!0;(async()=>{try{let{data:{user:t}}=await o.OQ.auth.getUser();if(!e)return;if(t){u(t.id);let{data:r,error:a}=await o.OQ.from("profiles").select("*").eq("id",t.id).single();if(!e)return;a?(console.error("Error loading profile:",a),n(null)):r&&n(r),b.current&&b.current.unsubscribe(),b.current=o.OQ.channel("profile_".concat(t.id,"_").concat(Date.now())).on("postgres_changes",{event:"*",schema:"public",table:"profiles",filter:"id=eq.".concat(t.id)},r=>{var a;e&&(null===(a=r.new)||void 0===a?void 0:a.id)===t.id&&n(r.new)}).subscribe(e=>{"SUBSCRIBED"===e&&console.log("Profile subscription active for user:",t.id)})}else n(null),u(null)}catch(t){console.error("Error initializing profile:",t),e&&n(null)}finally{e&&c(!1)}})();let{data:{subscription:t}}=o.OQ.auth.onAuthStateChange(async(t,a)=>{if(e){if("SIGNED_IN"===t&&(null==a?void 0:a.user)){u(a.user.id),r||c(!0);let{data:t,error:s}=await o.OQ.from("profiles").select("*").eq("id",a.user.id).single();e&&(t&&n(t),c(!1))}else"SIGNED_OUT"===t&&(n(null),u(null),b.current&&b.current.unsubscribe())}});return()=>{e=!1,null==t||t.unsubscribe(),b.current&&b.current.unsubscribe()}},[]);let m=async()=>{if(d)try{let{data:e}=await o.OQ.from("profiles").select("*").eq("id",d).single();e&&n(e)}catch(e){console.error("Error refreshing profile:",e)}finally{c(!1)}};return(0,a.jsx)(l.Provider,{value:{profile:r,loading:i,updateProfile:e=>{e.id===d&&(n(e),o.OQ.from("profiles").update({avatar_url:e.avatar_url,background_url:e.background_url}).eq("id",d).then(e=>{let{error:t}=e;t&&console.error("Error updating profile:",t)}))},refreshProfile:m},children:t})}function i(){let e=(0,s.useContext)(l);if(!e)throw Error("useProfile must be used within ProfileProvider");return e}},2141:function(e,t,r){"use strict";r.d(t,{OQ:function(){return a}});let a=(0,r(1545).eI)("https://mevfhlhwrrkbhppgeyaj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1ldmZobGh3cnJrYmhwcGdleWFqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5NDgyMDIsImV4cCI6MjA3NzUyNDIwMn0.E_Rhnhh8dbRiBLTg52HpDfJSqv2Q_hE-mSjHlkLF2IE")},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return o}});var a=r(1994),s=r(3335);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{color:n="currentColor",size:i=24,strokeWidth:c=2,absoluteStrokeWidth:d,children:u,...b}=r;return(0,a.createElement)("svg",{ref:l,...s,width:i,height:i,stroke:n,strokeWidth:d?24*Number(c)/Number(i):c,className:"lucide lucide-".concat(o(e)),...b},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...(Array.isArray(u)?u:[u])||[]])});return r.displayName="".concat(e),r}},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},function(e){e.O(0,[545,137,183,769,108,971,117,744],function(){return e(e.s=9779)}),_N_E=e.O()}]);