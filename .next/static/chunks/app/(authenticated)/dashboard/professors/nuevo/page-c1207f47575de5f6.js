(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[301],{1200:function(e,r,t){Promise.resolve().then(t.bind(t,6900))},6900:function(e,r,t){"use strict";t.d(r,{default:function(){return _}});var s=t(7437),a=t(2265),l=t(9376),o=t(2869),i=t(5186),n=t(6815),d=t(6070),c=t(2141),b=t(2660),u=t(3247),m=t(5863),x=t(2369),f=t(3245),p=t(2252),h=t(6901),g=t(535),v=t(4508);let N=(0,g.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),j=a.forwardRef((e,r)=>{let{className:t,variant:a,...l}=e;return(0,s.jsx)("div",{ref:r,role:"alert",className:(0,v.cn)(N({variant:a}),t),...l})});j.displayName="Alert";let y=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("h5",{ref:r,className:(0,v.cn)("mb-1 font-medium leading-none tracking-tight",t),...a})});y.displayName="AlertTitle";let w=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,v.cn)("text-sm [&_p]:leading-relaxed",t),...a})});w.displayName="AlertDescription";var k=t(7648),C=t(7586),I=t(8239);function _(e){let{profile:r}=e,t=(0,l.useRouter)(),[g,v]=(0,a.useState)(!1),[N,_]=(0,a.useState)(!1),[E,R]=(0,a.useState)(!1),[S,Z]=(0,a.useState)(!1),[F,O]=(0,a.useState)([]),[z,L]=(0,a.useState)(!1),J=(0,a.useRef)(null),[M,A]=(0,a.useState)({nombre:"",especialidad:"",facultad:"",email:"",otros_cursos:""});(0,a.useEffect)(()=>{let e=e=>{J.current&&!J.current.contains(e.target)&&L(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.useEffect)(()=>{let e=setTimeout(async()=>{let e=M.nombre.trim();if(e.length>=1){R(!0);let{data:r,error:t}=await c.OQ.from("professors").select("*").or("nombre.ilike.%".concat(e,"%,especialidad.ilike.%").concat(e,"%,facultad.ilike.%").concat(e,"%")).limit(20);!t&&r?(O(r.sort((r,t)=>{let s=r.nombre.toLowerCase().includes(e.toLowerCase()),a=t.nombre.toLowerCase().includes(e.toLowerCase());return s&&!a?-1:!s&&a?1:r.nombre.localeCompare(t.nombre)})),L(!0)):O([]),R(!1)}else O([]),L(!1)},150);return()=>clearTimeout(e)},[M.nombre]),(0,a.useEffect)(()=>{let e=setTimeout(async()=>{let e=M.nombre.trim(),r=M.especialidad.trim();if(e.length>3&&r.length>2){_(!0);let{data:t,error:s}=await c.OQ.from("professors").select("id").ilike("nombre",e).ilike("especialidad",r).limit(1);!s&&t&&t.length>0?Z(!0):Z(!1),_(!1)}else Z(!1)},400);return()=>clearTimeout(e)},[M.nombre,M.especialidad]);let D=e=>{let{id:r,value:t}=e.target;A(e=>({...e,[r]:t}))},G=e=>{A({nombre:e.nombre,especialidad:e.especialidad||"",facultad:e.facultad||"",email:e.email||"",otros_cursos:e.otros_cursos||""}),L(!1)},P=()=>"https://source.unsplash.com/1600x900/?nature,landscape&sig=".concat(Math.floor(1e4*Math.random())),T=async e=>{if(e.preventDefault(),!S){v(!0);try{let{error:e}=await c.OQ.from("professors").insert({nombre:M.nombre.trim(),especialidad:M.especialidad.trim(),facultad:M.facultad.trim()||null,email:M.email.trim()||null,otros_cursos:M.otros_cursos.trim()||null,background_image_url:P()});if(e)throw e;t.push("/dashboard/professors"),t.refresh()}catch(e){console.error("Error al guardar profesor:",e),alert("Error: ".concat(e.message))}finally{v(!1)}}};return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[(0,s.jsxs)(k.default,{href:"/dashboard/professors",className:"inline-flex items-center text-sm text-bb-text-secondary hover:text-bb-text mb-6 transition-colors",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"Volver a Profesores"]}),(0,s.jsxs)(d.Zb,{className:"bg-bb-card border-bb-border shadow-xl",children:[(0,s.jsxs)(d.Ol,{className:"border-b border-bb-border pb-8",children:[(0,s.jsx)(d.ll,{className:"text-3xl font-bold text-bb-text",children:"Agregar Nuevo Profesor"}),(0,s.jsx)(d.SZ,{className:"text-bb-text-secondary text-base mt-2",children:"Verifica si el profesor ya existe para evitar duplicados. Si aparece en las sugerencias, selecci\xf3nalo para completar sus datos."})]}),(0,s.jsx)(d.aY,{className:"pt-8",children:(0,s.jsxs)("form",{onSubmit:T,className:"space-y-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-3 relative",children:[(0,s.jsx)(n._,{htmlFor:"nombre",className:"text-bb-text text-sm font-bold uppercase tracking-wider",children:"Nombre Completo *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.I,{id:"nombre",value:M.nombre,onChange:D,onFocus:()=>M.nombre.length>=1&&L(!0),placeholder:"Escribe para buscar...",required:!0,className:"bg-bb-darker border-bb-border text-bb-text h-12 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all rounded-xl pl-10",autoComplete:"off"}),(0,s.jsx)(u.Z,{className:"absolute left-3 top-3.5 w-5 h-5 text-gray-500"}),E&&(0,s.jsx)("div",{className:"absolute right-3 top-3.5",children:(0,s.jsx)(m.Z,{className:"w-5 h-5 text-blue-500 animate-spin"})})]}),(0,s.jsx)(C.M,{children:z&&M.nombre.length>=1&&(0,s.jsxs)(I.E.div,{ref:J,initial:{opacity:0,y:-5,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-5,scale:.98},className:"absolute z-[100] w-full mt-1 bg-bb-card border border-bb-border rounded-xl shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-3 border-b border-bb-border bg-bb-darker/80 flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-[10px] font-bold text-blue-400 uppercase tracking-widest",children:"Coincidencias encontradas"}),E&&(0,s.jsx)(m.Z,{className:"w-3 h-3 text-blue-400 animate-spin"})]}),(0,s.jsx)("div",{className:"max-h-64 overflow-y-auto custom-scrollbar",children:F.length>0?F.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>G(e),className:"w-full flex items-center gap-4 p-4 hover:bg-blue-500/10 transition-all text-left border-b border-bb-border last:border-0 group",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500/20 to-indigo-500/20 flex items-center justify-center text-blue-400 shrink-0 group-hover:scale-110 transition-transform",children:(0,s.jsx)(x.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-bold text-bb-text truncate group-hover:text-blue-400 transition-colors",children:e.nombre}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,s.jsx)("span",{className:"text-[10px] font-bold bg-blue-500/10 text-blue-400 px-1.5 py-0.5 rounded uppercase",children:e.especialidad}),(0,s.jsx)("span",{className:"text-[10px] text-bb-text-secondary truncate",children:e.facultad||"Facultad General"})]})]}),(0,s.jsx)("div",{className:"text-[10px] font-bold text-blue-400/0 group-hover:text-blue-400/100 transition-all pr-2",children:"SELECCIONAR"})]},e.id)):E?null:(0,s.jsxs)("div",{className:"p-8 text-center bg-bb-darker/30",children:[(0,s.jsx)(f.Z,{className:"w-8 h-8 text-bb-text-secondary mx-auto mb-3 opacity-20"}),(0,s.jsx)("p",{className:"text-sm font-medium text-bb-text-secondary",children:"No hay coincidencias exactas."}),(0,s.jsx)("p",{className:"text-[10px] text-bb-text-secondary/50 mt-1",children:"Puedes continuar creando uno nuevo."})]})}),(0,s.jsx)("div",{className:"p-3 bg-bb-darker/50 border-t border-bb-border",children:(0,s.jsx)("p",{className:"text-[10px] text-center text-bb-text-secondary",children:"Si no ves al profesor, termina de escribir para crearlo."})})]})})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(n._,{htmlFor:"facultad",className:"text-bb-text text-sm font-bold uppercase tracking-wider",children:"Facultad"}),(0,s.jsx)(i.I,{id:"facultad",value:M.facultad,onChange:D,placeholder:"Ej: Ingenier\xeda",className:"bg-bb-darker border-bb-border text-bb-text h-12 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all rounded-xl"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(n._,{htmlFor:"especialidad",className:"text-bb-text text-sm font-bold uppercase tracking-wider",children:"Materia Principal *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.I,{id:"especialidad",value:M.especialidad,onChange:D,placeholder:"Ej: C\xe1lculo I",required:!0,className:"bg-bb-darker border-bb-border text-bb-text h-12 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all rounded-xl pr-10 ".concat(S?"border-red-500/50 ring-red-500/10":"")}),N&&(0,s.jsx)("div",{className:"absolute right-3 top-3",children:(0,s.jsx)(m.Z,{className:"w-5 h-5 text-blue-500 animate-spin"})})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(n._,{htmlFor:"email",className:"text-bb-text text-sm font-bold uppercase tracking-wider",children:"Correo Electr\xf3nico"}),(0,s.jsx)(i.I,{id:"email",type:"email",value:M.email,onChange:D,placeholder:"prof@universidad.edu",className:"bg-bb-darker border-bb-border text-bb-text h-12 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all rounded-xl"})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(n._,{htmlFor:"otros_cursos",className:"text-bb-text text-sm font-bold uppercase tracking-wider",children:"Otros Cursos que Dicta"}),(0,s.jsx)(i.I,{id:"otros_cursos",value:M.otros_cursos,onChange:D,placeholder:"Ej: \xc1lgebra, Estad\xedstica, F\xedsica I (Separados por comas)",className:"bg-bb-darker border-bb-border text-bb-text h-12 focus:ring-blue-500/20 focus:border-blue-500/50 transition-all rounded-xl"})]}),(0,s.jsxs)(C.M,{children:[S&&(0,s.jsx)(I.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:(0,s.jsx)(j,{variant:"destructive",className:"bg-red-500/10 border-red-500/50 text-red-400 rounded-2xl overflow-hidden p-6",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-red-500/20 flex items-center justify-center shrink-0",children:(0,s.jsx)(p.Z,{className:"h-6 w-6 text-red-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(y,{className:"text-lg font-bold",children:"Profesor ya registrado"}),(0,s.jsxs)(w,{className:"text-sm opacity-90 mt-1",children:["Ya existe un profesor llamado ",(0,s.jsxs)("span",{className:"font-bold underline decoration-red-500/30",children:['"',M.nombre,'"']})," para la materia ",(0,s.jsxs)("span",{className:"font-bold underline decoration-red-500/30",children:['"',M.especialidad,'"']}),".",(0,s.jsx)("br",{}),"No es necesario volver a crearlo."]})]})]})})}),!S&&M.nombre.trim().length>3&&M.especialidad.trim().length>2&&!N&&!E&&(0,s.jsx)(I.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:(0,s.jsxs)("div",{className:"flex items-center gap-3 text-green-400 text-sm font-bold bg-green-500/10 p-5 rounded-2xl border border-green-500/20",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-green-500/20 flex items-center justify-center shrink-0",children:(0,s.jsx)(h.Z,{className:"w-5 h-5"})}),"Este profesor y materia est\xe1n disponibles para registro."]})})]}),(0,s.jsxs)("div",{className:"pt-6 border-t border-bb-border flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>t.back(),className:"flex-1 h-14 border-bb-border bg-bb-darker hover:bg-bb-hover text-bb-text font-bold rounded-2xl transition-all",children:"Cancelar"}),(0,s.jsx)(o.z,{type:"submit",disabled:g||S||N,className:"flex-1 h-14 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold rounded-2xl shadow-xl shadow-blue-500/20 transition-all border-0 text-lg group",children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Z,{className:"w-6 h-6 mr-2 animate-spin"}),"Guardando..."]}):"Guardar Profesor"})]})]})})]})]})}},2869:function(e,r,t){"use strict";t.d(r,{z:function(){return d}});var s=t(7437),a=t(2265),l=t(6791),o=t(535),i=t(4508);let n=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-gray-200 bg-white hover:bg-gray-50 text-gray-900",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100 hover:text-gray-900",link:"text-blue-600 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3 text-xs",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:o,asChild:d=!1,...c}=e,b=d?l.g7:"button";return(0,s.jsx)(b,{className:(0,i.cn)(n({variant:a,size:o,className:t})),ref:r,...c})});d.displayName="Button"},6070:function(e,r,t){"use strict";t.d(r,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return o},aY:function(){return c},ll:function(){return n}});var s=t(7437),a=t(2265),l=t(4508);let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("rounded-lg bg-white shadow-sm",t),...a})});o.displayName="Card",a.forwardRef((e,r)=>{let{className:t,imageUrl:a,title:o,courseCode:i,professor:n,status:d,onStarClick:c,...b}=e;return(0,s.jsxs)("div",{ref:r,className:(0,l.cn)("group cursor-pointer overflow-hidden rounded-lg shadow-md transition-all hover:shadow-lg",t),...b,children:[(0,s.jsx)("div",{className:"relative h-40 overflow-hidden bg-gray-200",children:a?(0,s.jsx)("img",{src:a,alt:o,className:"h-full w-full object-cover transition-transform group-hover:scale-105"}):(0,s.jsx)("div",{className:"h-full w-full bg-gradient-to-br from-blue-400 to-blue-600"})}),(0,s.jsxs)("div",{className:"bg-white p-4",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:i}),(0,s.jsx)("h3",{className:"mt-1 line-clamp-2 text-sm font-semibold text-gray-900",children:o}),(0,s.jsx)("p",{className:"mt-2 text-xs text-gray-600",children:n}),(0,s.jsxs)("div",{className:"mt-3 flex items-center justify-between pt-3 border-t border-gray-100",children:[(0,s.jsx)("span",{className:"inline-flex items-center rounded-full bg-green-50 px-2 py-1 text-xs font-medium text-green-700",children:d||"Abierto"}),(0,s.jsx)("button",{onClick:c,className:"text-gray-300 transition-colors hover:text-yellow-400","aria-label":"Guardar curso",children:"â˜…"})]})]})]})}).displayName="CourseCard";let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let n=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("h2",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});n.displayName="CardTitle";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("p",{ref:r,className:(0,l.cn)("text-sm text-gray-500",t),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",t),...a})});c.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},5186:function(e,r,t){"use strict";t.d(r,{I:function(){return o}});var s=t(7437),a=t(2265),l=t(4508);let o=a.forwardRef((e,r)=>{let{className:t,type:a,...o}=e;return(0,s.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm text-gray-950 placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...o})});o.displayName="Input"},6815:function(e,r,t){"use strict";t.d(r,{_:function(){return d}});var s=t(7437),a=t(2265),l=t(6394),o=t(535),i=t(4508);let n=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(l.f,{ref:r,className:(0,i.cn)(n(),t),...a})});d.displayName=l.f.displayName},2141:function(e,r,t){"use strict";t.d(r,{OQ:function(){return s},q4:function(){return a}});let s=(0,t(338).createBrowserClient)("https://mevfhlhwrrkbhppgeyaj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1ldmZobGh3cnJrYmhwcGdleWFqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5NDgyMDIsImV4cCI6MjA3NzUyNDIwMn0.E_Rhnhh8dbRiBLTg52HpDfJSqv2Q_hE-mSjHlkLF2IE");async function a(e){return await e()}},4508:function(e,r,t){"use strict";t.d(r,{cn:function(){return l}});var s=t(1994),a=t(3335);function l(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,s.W)(r))}}},function(e){e.O(0,[338,137,451,239,203,971,117,744],function(){return e(e.s=1200)}),_N_E=e.O()}]);