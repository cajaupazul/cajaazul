(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[254],{5316:function(e,t,r){Promise.resolve().then(r.bind(r,4658))},4658:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var a=r(7437),s=r(2265),l=r(6070),n=r(2869),o=r(5186),i=r(6815),d=r(6110),c=r(5900),u=r(3247),m=r(9397),b=r(9474),f=r(6595),x=r(2141),h=r(8239),p=r(7586),g=r(6025),y=r(9660),v=r(9376),N=r(4991);let j={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},w={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};function C(){let e=(0,v.useRouter)(),{colors:t}=(0,y.F)(),{profile:r,loading:C}=(0,N.U)(),[F,E]=(0,s.useState)([]),[k,_]=(0,s.useState)(""),[I,S]=(0,s.useState)(!0),[P,R]=(0,s.useState)(new Set),[O,z]=(0,s.useState)(!1),[D,M]=(0,s.useState)({nombre:"",especialidad:"",facultad:"",email:"",otros_cursos:""});(0,s.useEffect)(()=>{Z();let t=async()=>{r&&await A(r.id)};r&&t(),C||r||e.push("/auth/login");let a=setTimeout(()=>S(!1),3e3);return()=>clearTimeout(a)},[r,C,e]);let Z=async()=>{try{0===F.length&&S(!0);let{data:e,error:t}=await x.OQ.from("professors").select("\n          *,\n          professor_ratings (puntuacion)\n        ").order("nombre",{ascending:!0});if(t)throw t;if(e){let t=e.map(e=>{let t=e.professor_ratings||[],r=t.length>0?t.reduce((e,t)=>e+(t.puntuacion||0),0)/t.length:0;return{...e,averageRating:Math.round(10*r)/10,ratingCount:t.length}});E(t)}}catch(e){console.error("Error fetching professors:",e)}finally{S(!1)}},A=async e=>{let{data:t}=await x.OQ.from("user_professors").select("professor_id").eq("user_id",e);t&&R(new Set(t.map(e=>e.professor_id)))},q=e=>{let t=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#14B8A6","#F97316"],r=0;for(let t=0;t<e.length;t++)r=e.charCodeAt(t)+((r<<5)-r);return t[Math.abs(r)%t.length]},Q=()=>"https://picsum.photos/500/200?random=".concat(Math.floor(1e5*Math.random())),B=async e=>{if(e.preventDefault(),!D.nombre.trim()||!D.especialidad.trim()){alert("Por favor completa los campos requeridos");return}let{error:t}=await x.OQ.from("professors").insert({nombre:D.nombre,especialidad:D.especialidad,facultad:D.facultad,email:D.email||null,otros_cursos:D.otros_cursos||null,background_image_url:Q()});t?alert("Error al crear el profesor"):(z(!1),M({nombre:"",especialidad:"",facultad:"",email:"",otros_cursos:""}),Z())},T=F.filter(e=>{var t;return e.nombre.toLowerCase().includes(k.toLowerCase())||(null===(t=e.especialidad)||void 0===t?void 0:t.toLowerCase().includes(k.toLowerCase()))});return I?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-bb-dark",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-bb-dark p-8 relative overflow-hidden transition-colors duration-300",children:[(0,a.jsx)(g.Z,{}),(0,a.jsxs)(h.E.div,{initial:"hidden",animate:"visible",variants:j,className:"max-w-7xl mx-auto relative z-10",children:[(0,a.jsxs)("div",{className:"mb-8 flex flex-col md:flex-row md:items-end justify-between gap-6",children:[(0,a.jsxs)(h.E.div,{variants:w,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl shadow-lg shadow-blue-500/20",children:(0,a.jsx)(c.Z,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h1",{className:"text-4xl font-black text-bb-text tracking-tight",children:"Profesores"})]}),(0,a.jsx)("p",{className:"text-bb-text-secondary font-medium ml-1",children:"Descubre a los mejores mentores de tu facultad"})]}),(0,a.jsxs)(h.E.div,{variants:w,className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto",children:[(0,a.jsxs)("div",{className:"relative group flex-1 md:w-80",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(u.Z,{className:"h-5 w-5 text-gray-500 group-focus-within:text-blue-400 transition-colors"})}),(0,a.jsx)(o.I,{placeholder:"Buscar por nombre o materia...",value:k,onChange:e=>_(e.target.value),className:"pl-10 h-12 bg-bb-card border-bb-border text-bb-text placeholder:text-gray-500 focus:border-blue-500/50 focus:ring-blue-500/20 rounded-xl transition-all"})]}),(0,a.jsxs)(d.Vq,{open:O,onOpenChange:z,children:[(0,a.jsx)(d.hg,{asChild:!0,children:(0,a.jsxs)(n.z,{className:"h-12 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold rounded-xl shadow-lg shadow-blue-500/20 border-0",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 mr-2"}),"Agregar Profesor"]})}),(0,a.jsxs)(d.cZ,{className:"bg-bb-card border-bb-border text-bb-text sm:max-w-lg max-h-[85vh] overflow-y-auto",children:[(0,a.jsxs)(d.fK,{children:[(0,a.jsx)(d.$N,{className:"text-2xl font-bold",children:"Agregar Nuevo Profesor"}),(0,a.jsx)(d.Be,{className:"text-bb-text-secondary",children:"Comparte informaci\xf3n sobre un profesor para que otros estudiantes puedan calificarlo."})]}),(0,a.jsxs)("form",{onSubmit:B,className:"space-y-5 mt-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i._,{htmlFor:"nombre",className:"text-bb-text text-xs font-semibold uppercase tracking-wide",children:"Nombre *"}),(0,a.jsx)(o.I,{id:"nombre",value:D.nombre,onChange:e=>M({...D,nombre:e.target.value}),placeholder:"Ej: Dr. Juan Garc\xeda",required:!0,className:"bg-bb-darker border-bb-border text-bb-text h-11"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i._,{htmlFor:"facultad",className:"text-bb-text text-xs font-semibold uppercase tracking-wide",children:"Facultad"}),(0,a.jsx)(o.I,{id:"facultad",value:D.facultad,onChange:e=>M({...D,facultad:e.target.value}),placeholder:"Ej: Ingenier\xeda",className:"bg-bb-darker border-bb-border text-bb-text h-11"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i._,{htmlFor:"especialidad",className:"text-bb-text text-xs font-semibold uppercase tracking-wide",children:"Materia Principal *"}),(0,a.jsx)(o.I,{id:"especialidad",value:D.especialidad,onChange:e=>M({...D,especialidad:e.target.value}),placeholder:"Ej: C\xe1lculo I",required:!0,className:"bg-bb-darker border-bb-border text-bb-text h-11"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i._,{htmlFor:"email",className:"text-bb-text text-xs font-semibold uppercase tracking-wide",children:"Correo Electr\xf3nico"}),(0,a.jsx)(o.I,{id:"email",type:"email",value:D.email,onChange:e=>M({...D,email:e.target.value}),placeholder:"prof@universidad.edu",className:"bg-bb-darker border-bb-border text-bb-text h-11"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i._,{htmlFor:"otros_cursos",className:"text-bb-text text-xs font-semibold uppercase tracking-wide",children:"Otros Cursos que Dicta"}),(0,a.jsx)(o.I,{id:"otros_cursos",value:D.otros_cursos,onChange:e=>M({...D,otros_cursos:e.target.value}),placeholder:"Ej: \xc1lgebra, Estad\xedstica, F\xedsica I",className:"bg-bb-darker border-bb-border text-bb-text h-11"}),(0,a.jsx)("p",{className:"text-xs text-bb-text-secondary",children:"Separa los cursos con comas"})]}),(0,a.jsx)(n.z,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-500 font-bold h-12 mt-4 text-base",children:"Guardar Profesor"})]})]})]})]})]}),T.length>0?(0,a.jsx)(h.E.div,{variants:j,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:(0,a.jsx)(p.M,{children:T.map(t=>{P.has(t.id);let r=t.averageRating>=4.5;return(0,a.jsx)(h.E.div,{variants:w,layout:!0,className:"group relative",children:(0,a.jsxs)(l.Zb,{className:"h-full overflow-hidden hover:-translate-y-1 transition-all duration-300 bg-bb-card border border-bb-border",children:[(0,a.jsxs)("div",{className:"relative h-24 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-cover bg-center opacity-60 group-hover:opacity-80 transition-opacity duration-500",style:{backgroundImage:"url('".concat(t.background_image_url,"')")}}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-bb-card to-transparent"}),r&&(0,a.jsxs)("div",{className:"absolute top-2 right-2 bg-yellow-500/20 border border-yellow-500/30 text-yellow-400 text-[10px] font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[(0,a.jsx)(b.Z,{className:"w-3 h-3"})," TOP"]})]}),(0,a.jsxs)(l.aY,{className:"p-0 relative",children:[(0,a.jsxs)("div",{className:"px-5 pt-12 pb-4 relative",children:[(0,a.jsx)("div",{className:"absolute -top-10 left-5",children:(0,a.jsx)("div",{className:"h-20 w-20 rounded-2xl flex items-center justify-center text-white font-bold text-3xl transition-transform group-hover:scale-105 duration-300 ring-4 ring-bb-card",style:{backgroundColor:q(t.nombre)},children:t.nombre.charAt(0).toUpperCase()})}),(0,a.jsx)("div",{className:"flex justify-end mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full ".concat(t.averageRating>=4.5?"bg-yellow-500/20 border border-yellow-500/30":"bg-bb-darker border border-bb-border"),children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 ".concat(t.averageRating>=4.5?"fill-yellow-400 text-yellow-400":"fill-gray-400 text-gray-400")}),(0,a.jsx)("span",{className:"text-sm font-bold ".concat(t.averageRating>=4.5?"text-yellow-400":"text-bb-text"),children:t.averageRating.toFixed(1)})]})}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-bb-text mb-1 truncate group-hover:text-blue-400 transition-colors",children:t.nombre}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wider text-blue-400 bg-blue-500/10 px-2 py-1 rounded-md",children:t.especialidad}),(0,a.jsx)("span",{className:"text-xs text-bb-text-secondary truncate max-w-[120px]",children:t.facultad||"Facultad General"})]})]})]}),(0,a.jsx)("div",{className:"h-px w-full bg-bb-border"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 p-4 gap-3",children:[(0,a.jsxs)(n.z,{variant:"outline",className:"w-full border-bb-border bg-bb-darker hover:bg-bb-hover text-bb-text-secondary hover:text-bb-text font-medium text-xs h-10 transition-all",onClick:r=>{r.stopPropagation(),e.push("/dashboard/professors/".concat(t.id))},children:[(0,a.jsx)(f.Z,{className:"w-3.5 h-3.5 mr-2"}),"Calificar"]}),(0,a.jsx)(n.z,{className:"w-full bg-blue-600 hover:bg-blue-500 text-white font-bold text-xs h-10",onClick:r=>{r.stopPropagation(),e.push("/dashboard/professors/".concat(t.id))},children:"Ver Perfil"})]})]})]})},t.id)})})}):(0,a.jsxs)(h.E.div,{variants:w,className:"text-center py-20 bg-bb-card rounded-3xl border border-bb-border",children:[(0,a.jsx)("div",{className:"bg-bb-darker p-4 rounded-full w-20 h-20 mx-auto flex items-center justify-center mb-4",children:(0,a.jsx)(u.Z,{className:"h-10 w-10 text-bb-text-secondary"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-bb-text mb-2",children:k?"No encontramos coincidencias":"A\xfan no hay profesores"}),(0,a.jsx)("p",{className:"text-bb-text-secondary max-w-md mx-auto",children:k?"Intenta con otro nombre o especialidad.":"S\xe9 el primero en agregar a un profesor y ayuda a la comunidad."}),!k&&(0,a.jsx)(n.z,{onClick:()=>z(!0),className:"mt-6 bg-blue-600 hover:bg-blue-500 text-white font-bold",children:"Agregar Profesor"})]})]})]})}},6025:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var a=r(7437),s=r(2265),l=r(8239),n=r(9660);function o(){let{colors:e,themeMode:t}=(0,n.F)(),[r,o]=(0,s.useState)([]);return((0,s.useEffect)(()=>{o(Array.from({length:6}).map((e,t)=>({id:t,x:100*Math.random(),y:100*Math.random(),size:300*Math.random()+100,duration:20*Math.random()+20,delay:5*Math.random()})))},[]),"dark"===t)?null:(0,a.jsx)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none z-0",children:r.map(t=>(0,a.jsx)(l.E.div,{className:"absolute rounded-full opacity-30 blur-3xl mix-blend-multiply filter",style:{backgroundColor:t.id%2==0?(null==e?void 0:e.primary)||"#3b82f6":(null==e?void 0:e.secondary)||"#6366f1",width:t.size,height:t.size,left:"".concat(t.x,"%"),top:"".concat(t.y,"%")},animate:{x:[0,200*Math.random()-100,0],y:[0,200*Math.random()-100,0],scale:[1,1.2,1]},transition:{duration:t.duration,repeat:1/0,repeatType:"reverse",ease:"easeInOut",delay:t.delay}},t.id))})}},2869:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(7437),s=r(2265),l=r(6791),n=r(535),o=r(4508);let i=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-gray-200 bg-white hover:bg-gray-50 text-gray-900",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100 hover:text-gray-900",link:"text-blue-600 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3 text-xs",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:d=!1,...c}=e,u=d?l.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(i({variant:s,size:n,className:r})),ref:t,...c})});d.displayName="Button"},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return n},aY:function(){return c},ll:function(){return i}});var a=r(7437),s=r(2265),l=r(4508);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg bg-white shadow-sm",r),...s})});n.displayName="Card",s.forwardRef((e,t)=>{let{className:r,imageUrl:s,title:n,courseCode:o,professor:i,status:d,onStarClick:c,...u}=e;return(0,a.jsxs)("div",{ref:t,className:(0,l.cn)("group cursor-pointer overflow-hidden rounded-lg shadow-md transition-all hover:shadow-lg",r),...u,children:[(0,a.jsx)("div",{className:"relative h-40 overflow-hidden bg-gray-200",children:s?(0,a.jsx)("img",{src:s,alt:n,className:"h-full w-full object-cover transition-transform group-hover:scale-105"}):(0,a.jsx)("div",{className:"h-full w-full bg-gradient-to-br from-blue-400 to-blue-600"})}),(0,a.jsxs)("div",{className:"bg-white p-4",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:o}),(0,a.jsx)("h3",{className:"mt-1 line-clamp-2 text-sm font-semibold text-gray-900",children:n}),(0,a.jsx)("p",{className:"mt-2 text-xs text-gray-600",children:i}),(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-between pt-3 border-t border-gray-100",children:[(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-green-50 px-2 py-1 text-xs font-medium text-green-700",children:d||"Abierto"}),(0,a.jsx)("button",{onClick:c,className:"text-gray-300 transition-colors hover:text-yellow-400","aria-label":"Guardar curso",children:"â˜…"})]})]})]})}).displayName="CourseCard";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h2",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});i.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-gray-500",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},6110:function(e,t,r){"use strict";r.d(t,{$N:function(){return x},Be:function(){return h},Vq:function(){return i},cN:function(){return f},cZ:function(){return m},fK:function(){return b},hg:function(){return d}});var a=r(7437),s=r(2265),l=r(3240),n=r(2489),o=r(4508);let i=l.fC,d=l.xz,c=l.h_;l.x8;let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});u.displayName=l.aV.displayName;let m=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(l.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-gray-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...i,children:[s,(0,a.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:pointer-events-none",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.VY.displayName;let b=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};b.displayName="DialogHeader";let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};f.displayName="DialogFooter";let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});x.displayName=l.Dx.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.dk,{ref:t,className:(0,o.cn)("text-sm text-gray-500",r),...s})});h.displayName=l.dk.displayName},5186:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var a=r(7437),s=r(2265),l=r(4508);let n=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm text-gray-950 placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});n.displayName="Input"},6815:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var a=r(7437),s=r(2265),l=r(6394),n=r(535),o=r(4508);let i=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.f,{ref:t,className:(0,o.cn)(i(),r),...s})});d.displayName=l.f.displayName},4991:function(e,t,r){"use strict";r.d(t,{ProfileProvider:function(){return o},U:function(){return i}});var a=r(7437),s=r(2265),l=r(2141);let n=(0,s.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,s.useState)(null),[i,d]=(0,s.useState)(!0),[c,u]=(0,s.useState)(null),m=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=!0;(async()=>{try{let{data:{user:t}}=await l.OQ.auth.getUser();if(!e)return;if(t){u(t.id);let{data:r,error:a}=await l.OQ.from("profiles").select("*").eq("id",t.id).single();if(!e)return;a?(console.error("Error loading profile:",a),o(null)):r&&o(r),m.current&&m.current.unsubscribe(),m.current=l.OQ.channel("profile_".concat(t.id,"_").concat(Date.now())).on("postgres_changes",{event:"*",schema:"public",table:"profiles",filter:"id=eq.".concat(t.id)},r=>{var a;e&&(null===(a=r.new)||void 0===a?void 0:a.id)===t.id&&o(r.new)}).subscribe(e=>{"SUBSCRIBED"===e&&console.log("Profile subscription active for user:",t.id)})}else o(null),u(null)}catch(t){console.error("Error initializing profile:",t),e&&o(null)}finally{e&&d(!1)}})();let{data:{subscription:t}}=l.OQ.auth.onAuthStateChange(async(t,a)=>{if(e){if("SIGNED_IN"===t&&(null==a?void 0:a.user)){u(a.user.id),r||d(!0);let{data:t,error:s}=await l.OQ.from("profiles").select("*").eq("id",a.user.id).single();e&&(t&&o(t),d(!1))}else"SIGNED_OUT"===t&&(o(null),u(null),m.current&&m.current.unsubscribe())}});return()=>{e=!1,null==t||t.unsubscribe(),m.current&&m.current.unsubscribe()}},[]);let b=async()=>{if(c)try{let{data:e}=await l.OQ.from("profiles").select("*").eq("id",c).single();e&&o(e)}catch(e){console.error("Error refreshing profile:",e)}finally{d(!1)}};return(0,a.jsx)(n.Provider,{value:{profile:r,loading:i,updateProfile:e=>{e.id===c&&(o(e),l.OQ.from("profiles").update({avatar_url:e.avatar_url,background_url:e.background_url}).eq("id",c).then(e=>{let{error:t}=e;t&&console.error("Error updating profile:",t)}))},refreshProfile:b},children:t})}function i(){let e=(0,s.useContext)(n);if(!e)throw Error("useProfile must be used within ProfileProvider");return e}},2141:function(e,t,r){"use strict";r.d(t,{OQ:function(){return a}});let a=(0,r(1545).eI)("https://mevfhlhwrrkbhppgeyaj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1ldmZobGh3cnJrYmhwcGdleWFqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5NDgyMDIsImV4cCI6MjA3NzUyNDIwMn0.E_Rhnhh8dbRiBLTg52HpDfJSqv2Q_hE-mSjHlkLF2IE")},9660:function(e,t,r){"use strict";r.d(t,{F:function(){return i},ThemeProvider:function(){return d}});var a=r(7437),s=r(2265),l=r(2141);let n={"Facultad de Ciencias Empresariales":{primary:"#0066FF",secondary:"#E6F0FF",dark:"#0052CC",light:"#F0F7FF"},"Facultad de Derecho":{primary:"#FF0000",secondary:"#FFE6E6",dark:"#CC0000",light:"#FFF0F0"},"Facultad de Econom\xeda y Finanzas":{primary:"#00CC00",secondary:"#E6FFE6",dark:"#009900",light:"#F0FFF0"},"Facultad de Ingenier\xeda":{primary:"#FFCC00",secondary:"#FFFAE6",dark:"#CC9900",light:"#FFFBF0"}},o=(0,s.createContext)({faculty:null,colors:null,setFaculty:()=>{},loading:!0,themeMode:"glass",setThemeMode:()=>{}}),i=()=>(0,s.useContext)(o);function d(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[d,c]=(0,s.useState)(!0),[u,m]=(0,s.useState)("glass");(0,s.useEffect)(()=>{let e=localStorage.getItem("themeMode");e&&["light","dark","glass"].includes(e)?(m(e),document.documentElement.setAttribute("data-theme",e)):(m("glass"),document.documentElement.setAttribute("data-theme","glass"))},[]),(0,s.useEffect)(()=>{let e=async()=>{try{let{data:{user:e}}=await l.OQ.auth.getUser();if(e){let{data:t}=await l.OQ.from("profiles").select("carrera").eq("id",e.id).single();(null==t?void 0:t.carrera)?i(t.carrera):i(null)}else i(null)}catch(e){console.error("Error loading user faculty:",e),i(null)}finally{c(!1)}};e();let{data:{subscription:t}}=l.OQ.auth.onAuthStateChange(async(t,a)=>{("SIGNED_IN"===t||"SIGNED_OUT"===t||"USER_UPDATED"===t)&&(r||c(!0),await e())});return()=>{null==t||t.unsubscribe()}},[]),(0,s.useEffect)(()=>{if(r&&r in n){let e=n[r];document.documentElement.style.setProperty("--faculty-primary",e.primary),document.documentElement.style.setProperty("--faculty-secondary",e.secondary),document.documentElement.style.setProperty("--faculty-dark",e.dark),document.documentElement.style.setProperty("--faculty-light",e.light)}},[r]);let b=r&&r in n?n[r]:n["Facultad de Ciencias Empresariales"];return(0,a.jsx)(o.Provider,{value:{faculty:r,colors:b,setFaculty:e=>{i(e)},loading:d,themeMode:u,setThemeMode:e=>{m(e),localStorage.setItem("themeMode",e),document.documentElement.setAttribute("data-theme",e)}},children:t})}},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return l}});var a=r(1994),s=r(3335);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[545,137,183,239,769,858,971,117,744],function(){return e(e.s=5316)}),_N_E=e.O()}]);