(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{2767:function(e,t,a){Promise.resolve().then(a.bind(a,4465))},4465:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var r=a(7437),l=a(2265),s=a(9660),n=a(9179),i=a(9397),o=a(3247),c=a(1047),d=a(2805),u=a(1239),m=a(6858),h=a(5805),x=a(166),b=a(7586),p=a(8239);let f=(0,x.default)(()=>Promise.all([a.e(137),a.e(152)]).then(a.bind(a,5152)),{loadableGenerated:{webpack:()=>[5152]},ssr:!1,loading:()=>(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-bb-dark flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})});function g(){let{colors:e}=(0,s.F)(),{profile:t}=(0,n.a)(),[a,x]=(0,l.useState)(""),[g,v]=(0,l.useState)("Todos"),[j,N]=(0,l.useState)(!1),w={id:"pixel-art-2025",nombre:"Pixel Art Event 2025",tipo:"Cultural",descripcion:'\xa1\xdanete al lienzo infinito! Pinta, colabora y crea arte en tiempo real con toda la universidad. Calidad "wplace".',fecha:new Date(2025,11,15),lugar:"Online - CampusLink",participantes:1240,imagen:null,isSpecial:!0},E=[w].filter(e=>{let t="Todos"===g||e.tipo===g,r=e.nombre.toLowerCase().includes(a.toLowerCase());return t&&r});return(0,r.jsxs)("div",{className:"min-h-screen bg-bb-dark p-8 relative overflow-hidden",children:[(0,r.jsx)(b.M,{children:j&&(0,r.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60]",children:(0,r.jsx)(f,{eventId:w.id,onClose:()=>N(!1)})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto relative z-10",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-4",children:[(0,r.jsxs)(p.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[(0,r.jsxs)("h1",{className:"text-5xl font-black text-bb-text mb-2 tracking-tight flex items-center gap-3",children:["Eventos ",(0,r.jsx)("span",{className:"text-blue-400",children:"Universitarios"})]}),(0,r.jsx)("p",{className:"text-bb-text-secondary text-lg",children:"Descubre y participa en experiencias \xfanicas."})]}),(0,r.jsxs)(p.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center gap-2 px-8 py-4 rounded-xl font-bold transition-all text-white bg-blue-600 hover:bg-blue-500",children:[(0,r.jsx)(i.Z,{className:"w-6 h-6"}),"Crear Evento"]})]}),(0,r.jsxs)("div",{className:"mb-10",children:[(0,r.jsxs)(p.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative mb-8 text-lg",children:[(0,r.jsx)(o.Z,{className:"absolute left-4 top-4 w-6 h-6 text-bb-text-secondary"}),(0,r.jsx)("input",{type:"text",placeholder:"Buscar eventos...",value:a,onChange:e=>x(e.target.value),className:"w-full pl-14 pr-4 py-4 rounded-xl bg-bb-card border border-bb-border text-bb-text placeholder-bb-text-secondary focus:outline-none focus:border-blue-500/50 transition-all"})]}),(0,r.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-4 scrollbar-hide",children:["Todos","Acad\xe9micos","Culturales","Deportivos"].map((t,a)=>(0,r.jsx)(p.E.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.05*a},onClick:()=>v(t),className:"px-6 py-3 rounded-xl font-bold transition-all whitespace-nowrap text-sm border",style:{backgroundColor:g===t?(null==e?void 0:e.primary)||"#3b82f6":"var(--bg-darker)",borderColor:g===t?"transparent":"var(--border)",color:g===t?"white":"var(--text-secondary)"},children:t},t))})]}),0===E.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,r.jsx)("div",{className:"bg-bb-darker p-8 rounded-full mb-6",children:(0,r.jsx)(c.Z,{className:"w-16 h-16 text-bb-text-secondary"})}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:"No hay eventos por ahora"}),(0,r.jsx)("p",{className:"text-gray-400 text-lg",children:"\xa1S\xe9 el primero en crear uno!"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:(0,r.jsx)(b.M,{children:E.map((e,t)=>(0,r.jsxs)(p.E.div,{layout:!0,initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},transition:{delay:.1*t},onClick:()=>N(!0),className:"group block rounded-2xl overflow-hidden bg-bb-card border border-bb-border hover:border-blue-500/30 transition-all cursor-pointer relative",children:[(0,r.jsxs)("div",{className:"h-56 relative overflow-hidden flex items-center justify-center bg-blue-600",children:[(0,r.jsx)("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle, #ffffff 1px, transparent 1px)",backgroundSize:"20px 20px"}}),(0,r.jsxs)("div",{className:"text-center z-10",children:[(0,r.jsx)("div",{className:"bg-white/10 p-5 rounded-2xl mb-4 inline-block border border-white/10",children:(0,r.jsx)(d.Z,{className:"w-14 h-14 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(y,{className:"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30 mb-2",children:[(0,r.jsx)(u.Z,{className:"w-3 h-3 mr-1"})," EN VIVO"]}),(0,r.jsx)("p",{className:"text-white font-black text-2xl tracking-tight",children:"Pixel Art Live"})]})]})]}),(0,r.jsxs)("div",{className:"p-6 relative",children:[(0,r.jsx)("div",{className:"absolute -top-8 right-6",children:(0,r.jsx)("button",{className:"bg-bb-text text-bb-darker p-3 rounded-full hover:scale-110 transition-transform flex items-center justify-center",children:(0,r.jsx)(m.Z,{className:"w-5 h-5"})})}),(0,r.jsxs)("div",{className:"mb-6 pt-2",children:[(0,r.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,r.jsx)("h3",{className:"text-2xl font-bold text-white group-hover:text-blue-400 transition-colors flex-1 leading-tight",children:e.nombre})}),(0,r.jsx)("p",{className:"text-gray-400 leading-relaxed font-medium",children:e.descripcion})]}),(0,r.jsxs)("div",{className:"space-y-3 mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 text-gray-300 text-sm font-medium",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-400",children:(0,r.jsx)(c.Z,{className:"w-5 h-5"})}),(0,r.jsx)("span",{children:e.fecha.toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long"})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-gray-300 text-sm font-medium",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg bg-green-500/10 text-green-400",children:(0,r.jsx)(h.Z,{className:"w-5 h-5"})}),(0,r.jsxs)("span",{children:[e.participantes.toLocaleString()," participantes"]})]})]}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)("span",{className:"px-4 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wider bg-white/5 text-gray-400 border border-white/5",children:e.tipo})})]})]},e.id))})})]})]})}function y(e){let{children:t,className:a}=e;return(0,r.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-semibold inline-flex items-center ".concat(a),children:t})}},9179:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return o},a:function(){return c}});var r=a(7437),l=a(2265),s=a(2141),n=a(9376);let i=(0,l.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(null),[u,m]=(0,l.useState)(null),[h,x]=(0,l.useState)(!0),b=(0,n.useRouter)();(0,l.useEffect)(()=>{let e=!0,{data:{subscription:t}}=s.OQ.auth.onAuthStateChange(async(t,a)=>{if(e){if(console.log("[Auth] Event: ".concat(t)),"SIGNED_OUT"===t){console.log("[Auth] Logout detectado. Limpiando estado..."),d(null),o(null),m(null),x(!1);return}(null==a?void 0:a.user)?(console.log("[Auth] Usuario autenticado: ".concat(a.user.email)),d(a),o(a.user),x(!1),("SIGNED_IN"===t||"INITIAL_SESSION"===t)&&p(a.user.id,a.user)):(d(null),o(null),m(null),x(!1))}});return()=>{e=!1,t.unsubscribe()}},[]);let p=async(e,t)=>{try{console.log("[Auth] Cargando perfil en background...");let{data:a,error:r}=await s.OQ.from("profiles").select("*").eq("id",e).single();if(r){console.error("[Auth] Error al cargar perfil:",r.message),"PGRST116"===r.code&&(console.log("[Auth] Perfil no existe. Creando..."),await f(e,t));return}a&&(console.log("[Auth] ✅ Perfil cargado:",a.nombre),m(a))}catch(e){console.error("[Auth] Error inesperado:",e)}},f=async(e,t)=>{try{var a;let r=t.user_metadata,l={id:e,nombre:(null==r?void 0:r.nombre)||(null===(a=t.email)||void 0===a?void 0:a.split("@")[0])||"Usuario",universidad:(null==r?void 0:r.universidad)||"Universidad Privada",carrera:(null==r?void 0:r.carrera)||"Estudiante",puntos:0},{data:n,error:i}=await s.OQ.from("profiles").insert([l]).select().single();if(i){console.error("[Auth] Error creando perfil:",i);return}console.log("[Auth] ✅ Perfil creado:",n.nombre),m(n)}catch(e){console.error("[Auth] Error al crear perfil:",e)}},g=async()=>{a&&await p(a.id,a)},y=async e=>{m(e)},v=async()=>{try{console.log("[Auth] Cerrando sesi\xf3n..."),await s.OQ.auth.signOut(),localStorage.clear(),sessionStorage.clear(),b.push("/auth/login")}catch(e){console.error("[Auth] Error en signOut:",e)}};return(0,r.jsx)(i.Provider,{value:{user:a,session:c,profile:u,loading:h,signOut:v,refreshProfile:g,updateProfile:y},children:t})}function c(){let e=(0,l.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2141:function(e,t,a){"use strict";a.d(t,{OQ:function(){return r},q4:function(){return l}});let r=(0,a(338).createBrowserClient)("https://mevfhlhwrrkbhppgeyaj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1ldmZobGh3cnJrYmhwcGdleWFqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5NDgyMDIsImV4cCI6MjA3NzUyNDIwMn0.E_Rhnhh8dbRiBLTg52HpDfJSqv2Q_hE-mSjHlkLF2IE");async function l(e){return await e()}},9660:function(e,t,a){"use strict";a.d(t,{F:function(){return o},ThemeProvider:function(){return c}});var r=a(7437),l=a(2265),s=a(2141);let n={"Facultad de Ciencias Empresariales":{primary:"#0066FF",secondary:"#E6F0FF",dark:"#0052CC",light:"#F0F7FF"},"Facultad de Derecho":{primary:"#FF0000",secondary:"#FFE6E6",dark:"#CC0000",light:"#FFF0F0"},"Facultad de Econom\xeda y Finanzas":{primary:"#00CC00",secondary:"#E6FFE6",dark:"#009900",light:"#F0FFF0"},"Facultad de Ingenier\xeda":{primary:"#FFCC00",secondary:"#FFFAE6",dark:"#CC9900",light:"#FFFBF0"}},i=(0,l.createContext)({faculty:null,colors:null,setFaculty:()=>{},loading:!0,themeMode:"glass",setThemeMode:()=>{}}),o=()=>(0,l.useContext)(i);function c(e){let{children:t}=e,[a,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(!0),[u,m]=(0,l.useState)("glass");(0,l.useEffect)(()=>{let e=localStorage.getItem("themeMode");e&&["light","dark","glass"].includes(e)?(m(e),document.documentElement.setAttribute("data-theme",e)):(m("glass"),document.documentElement.setAttribute("data-theme","glass"))},[]),(0,l.useEffect)(()=>{let e=async()=>{try{let{data:{user:e}}=await s.OQ.auth.getUser();if(e){let{data:t}=await s.OQ.from("profiles").select("carrera").eq("id",e.id).single();(null==t?void 0:t.carrera)?o(t.carrera):o(null)}else o(null)}catch(e){console.error("Error loading user faculty:",e),o(null)}finally{d(!1)}};e();let{data:{subscription:t}}=s.OQ.auth.onAuthStateChange(async(t,r)=>{("SIGNED_IN"===t||"SIGNED_OUT"===t||"USER_UPDATED"===t)&&(a||d(!0),await e())});return()=>{null==t||t.unsubscribe()}},[]),(0,l.useEffect)(()=>{if(a&&a in n){let e=n[a];document.documentElement.style.setProperty("--faculty-primary",e.primary),document.documentElement.style.setProperty("--faculty-secondary",e.secondary),document.documentElement.style.setProperty("--faculty-dark",e.dark),document.documentElement.style.setProperty("--faculty-light",e.light)}},[a]);let h=a&&a in n?n[a]:n["Facultad de Ciencias Empresariales"];return(0,r.jsx)(i.Provider,{value:{faculty:a,colors:h,setFaculty:e=>{o(e)},loading:c,themeMode:u,setThemeMode:e=>{m(e),localStorage.setItem("themeMode",e),document.documentElement.setAttribute("data-theme",e)}},children:t})}}},function(e){e.O(0,[338,239,266,971,117,744],function(){return e(e.s=2767)}),_N_E=e.O()}]);