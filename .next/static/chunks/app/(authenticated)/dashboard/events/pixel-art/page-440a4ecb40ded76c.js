(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{9576:function(e,t,r){Promise.resolve().then(r.bind(r,1299))},1299:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(7437),l=r(2265),s=r(9660),n=r(9179),o=r(9554),i=r(9397),c=r(2805),d=r(9763);let u=(0,d.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var h=r(8919);let m=(0,d.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),x=["#FFFFFF","#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#FFC0CB","#A52A2A","#808080","#C0C0C0","#FFD700"];function g(){let{colors:e}=(0,s.F)(),{profile:t}=(0,n.a)(),r=(0,l.useRef)(null),[d,g]=(0,l.useState)(Array(1024).fill("#FFFFFF")),[f,y]=(0,l.useState)("#000000"),[p,b]=(0,l.useState)(!1),[F,v]=(0,l.useState)(1),j=e=>{let t=r.current;if(!t)return;let a=t.getBoundingClientRect(),l=e.clientX-a.left,s=e.clientY-a.top,n=20*F,o=Math.floor(l/n),i=Math.floor(s/n);if(o>=0&&o<32&&i>=0&&i<32){let e=[...d];e[32*i+o]=f,g(e)}},w=async()=>{let e=document.createElement("canvas");e.width=640,e.height=640;let r=e.getContext("2d");if(!r)return;d.forEach((e,t)=>{let a=Math.floor(t/32),l=t%32;r.fillStyle=e,r.fillRect(20*l,20*a,20,20),r.strokeStyle="#e5e7eb",r.strokeRect(20*l,20*a,20,20)});let a="\xa1Mira mi arte de p\xedxeles! Creado en CampusLink Pixel Art por ".concat((null==t?void 0:t.nombre)||"un usuario");if(navigator.share)try{await navigator.share({title:"Mi Pixel Art",text:a})}catch(e){console.log("Error compartiendo:",e)}else alert(a)};return(0,a.jsx)("div",{className:"min-h-screen bg-bb-dark p-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Pixel Art Event"}),(0,a.jsx)("p",{className:"text-gray-400",children:"\xa1Crea tu propia obra maestra de p\xedxeles! Colabora con otros estudiantes en este evento interactivo."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsxs)("div",{className:"bg-bb-card rounded-xl p-6 border border-gray-700",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Lienzo"}),(0,a.jsx)("div",{className:"flex justify-center mb-6 bg-bb-dark rounded-lg p-4 overflow-auto max-h-96",children:(0,a.jsx)("canvas",{ref:r,width:640*F,height:640*F,onMouseDown:e=>{b(!0),j(e)},onMouseUp:()=>{b(!1)},onMouseMove:e=>{p&&j(e)},onMouseLeave:()=>b(!1),className:"border-2 border-gray-600 cursor-crosshair",style:{display:"block",imageRendering:"pixelated"}})}),(0,a.jsxs)("div",{className:"flex gap-3 justify-center flex-wrap",children:[(0,a.jsxs)("button",{onClick:()=>v(Math.max(.5,F-.5)),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white transition-all",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),"Alejar"]}),(0,a.jsxs)("span",{className:"px-4 py-2 text-white font-semibold",children:["Zoom: ",(100*F).toFixed(0),"%"]}),(0,a.jsxs)("button",{onClick:()=>v(Math.min(3,F+.5)),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-white transition-all",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),"Acercar"]})]})]})}),(0,a.jsxs)("div",{className:"lg:col-span-1",children:[(0,a.jsxs)("div",{className:"bg-bb-card rounded-xl p-6 border border-gray-700 mb-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5"}),"Colores"]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3 mb-4",children:x.map(e=>(0,a.jsx)("button",{onClick:()=>y(e),className:"w-full h-10 rounded-lg border-2 transition-all ".concat(f===e?"border-white scale-110":"border-gray-600 hover:border-gray-400"),style:{backgroundColor:e},title:e},e))}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,a.jsx)("p",{children:"Color seleccionado:"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded border border-gray-600",style:{backgroundColor:f}}),(0,a.jsx)("span",{className:"font-mono",children:f})]})]})]}),(0,a.jsxs)("div",{className:"bg-bb-card rounded-xl p-6 border border-gray-700",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Acciones"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{onClick:()=>{let e=document.createElement("canvas");e.width=640,e.height=640;let t=e.getContext("2d");if(!t)return;d.forEach((e,r)=>{let a=Math.floor(r/32),l=r%32;t.fillStyle=e,t.fillRect(20*l,20*a,20,20),t.strokeStyle="#e5e7eb",t.strokeRect(20*l,20*a,20,20)});let r=document.createElement("a");r.href=e.toDataURL(),r.download="pixel-art-".concat(Date.now(),".png"),r.click()},className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white font-semibold transition-all",children:[(0,a.jsx)(u,{className:"w-4 h-4"}),"Descargar"]}),(0,a.jsxs)("button",{onClick:w,className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-green-500 hover:bg-green-600 text-white font-semibold transition-all",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),"Compartir"]}),(0,a.jsxs)("button",{onClick:()=>{g(Array(1024).fill("#FFFFFF"))},className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-red-500 hover:bg-red-600 text-white font-semibold transition-all",children:[(0,a.jsx)(m,{className:"w-4 h-4"}),"Limpiar"]})]})]}),(0,a.jsxs)("div",{className:"bg-bb-card rounded-xl p-6 border border-gray-700 mt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Estad\xedsticas"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Dimensiones:"}),(0,a.jsxs)("span",{className:"text-white font-semibold",children:[32,"x",32]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"P\xedxeles:"}),(0,a.jsx)("span",{className:"text-white font-semibold",children:d.length})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Colores \xfanicos:"}),(0,a.jsx)("span",{className:"text-white font-semibold",children:new Set(d).size})]})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-8 bg-bb-card rounded-xl p-6 border border-gray-700",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-3",children:"C\xf3mo usar"}),(0,a.jsxs)("ul",{className:"text-gray-300 space-y-2 text-sm",children:[(0,a.jsx)("li",{children:"✓ Selecciona un color de la paleta"}),(0,a.jsx)("li",{children:"✓ Haz clic en el lienzo para pintar p\xedxeles"}),(0,a.jsx)("li",{children:"✓ Arrastra para pintar m\xfaltiples p\xedxeles"}),(0,a.jsx)("li",{children:"✓ Usa los botones de zoom para acercar/alejar"}),(0,a.jsx)("li",{children:"✓ Descarga tu obra como PNG o comp\xe1rtela con otros"})]})]})]})})}},9179:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return i},a:function(){return c}});var a=r(7437),l=r(2265),s=r(2141),n=r(9376);let o=(0,l.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,l.useState)(null),[c,d]=(0,l.useState)(null),[u,h]=(0,l.useState)(null),[m,x]=(0,l.useState)(!0),g=(0,n.useRouter)();(0,l.useEffect)(()=>{let e=!0,{data:{subscription:t}}=s.OQ.auth.onAuthStateChange(async(t,r)=>{if(e){if(console.log("[Auth] Event: ".concat(t)),"SIGNED_OUT"===t){console.log("[Auth] Logout detectado. Limpiando estado..."),d(null),i(null),h(null),x(!1);return}(null==r?void 0:r.user)?(console.log("[Auth] Usuario autenticado: ".concat(r.user.email)),d(r),i(r.user),x(!1),("SIGNED_IN"===t||"INITIAL_SESSION"===t)&&f(r.user.id,r.user)):(d(null),i(null),h(null),x(!1))}});return()=>{e=!1,t.unsubscribe()}},[]);let f=async(e,t)=>{try{console.log("[Auth] Cargando perfil en background...");let{data:r,error:a}=await s.OQ.from("profiles").select("*").eq("id",e).single();if(a){console.error("[Auth] Error al cargar perfil:",a.message),"PGRST116"===a.code&&(console.log("[Auth] Perfil no existe. Creando..."),await y(e,t));return}r&&(console.log("[Auth] ✅ Perfil cargado:",r.nombre),h(r))}catch(e){console.error("[Auth] Error inesperado:",e)}},y=async(e,t)=>{try{var r;let a=t.user_metadata,l={id:e,nombre:(null==a?void 0:a.nombre)||(null===(r=t.email)||void 0===r?void 0:r.split("@")[0])||"Usuario",universidad:(null==a?void 0:a.universidad)||"Universidad Privada",carrera:(null==a?void 0:a.carrera)||"Estudiante",puntos:0},{data:n,error:o}=await s.OQ.from("profiles").insert([l]).select().single();if(o){console.error("[Auth] Error creando perfil:",o);return}console.log("[Auth] ✅ Perfil creado:",n.nombre),h(n)}catch(e){console.error("[Auth] Error al crear perfil:",e)}},p=async()=>{r&&await f(r.id,r)},b=async e=>{h(e)},F=async()=>{try{console.log("[Auth] Cerrando sesi\xf3n..."),await s.OQ.auth.signOut(),localStorage.clear(),sessionStorage.clear(),g.push("/auth/login")}catch(e){console.error("[Auth] Error en signOut:",e)}};return(0,a.jsx)(o.Provider,{value:{user:r,session:c,profile:u,loading:m,signOut:F,refreshProfile:p,updateProfile:b},children:t})}function c(){let e=(0,l.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2141:function(e,t,r){"use strict";r.d(t,{OQ:function(){return a},q4:function(){return l}});let a=(0,r(338).createBrowserClient)("https://mevfhlhwrrkbhppgeyaj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1ldmZobGh3cnJrYmhwcGdleWFqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5NDgyMDIsImV4cCI6MjA3NzUyNDIwMn0.E_Rhnhh8dbRiBLTg52HpDfJSqv2Q_hE-mSjHlkLF2IE");async function l(e){return await e()}},9660:function(e,t,r){"use strict";r.d(t,{F:function(){return i},ThemeProvider:function(){return c}});var a=r(7437),l=r(2265),s=r(2141);let n={"Facultad de Ciencias Empresariales":{primary:"#0066FF",secondary:"#E6F0FF",dark:"#0052CC",light:"#F0F7FF"},"Facultad de Derecho":{primary:"#FF0000",secondary:"#FFE6E6",dark:"#CC0000",light:"#FFF0F0"},"Facultad de Econom\xeda y Finanzas":{primary:"#00CC00",secondary:"#E6FFE6",dark:"#009900",light:"#F0FFF0"},"Facultad de Ingenier\xeda":{primary:"#FFCC00",secondary:"#FFFAE6",dark:"#CC9900",light:"#FFFBF0"}},o=(0,l.createContext)({faculty:null,colors:null,setFaculty:()=>{},loading:!0,themeMode:"glass",setThemeMode:()=>{}}),i=()=>(0,l.useContext)(o);function c(e){let{children:t}=e,[r,i]=(0,l.useState)(null),[c,d]=(0,l.useState)(!0),[u,h]=(0,l.useState)("glass");(0,l.useEffect)(()=>{let e=localStorage.getItem("themeMode");e&&["light","dark","glass"].includes(e)?(h(e),document.documentElement.setAttribute("data-theme",e)):(h("glass"),document.documentElement.setAttribute("data-theme","glass"))},[]),(0,l.useEffect)(()=>{let e=async()=>{try{let{data:{user:e}}=await s.OQ.auth.getUser();if(e){let{data:t}=await s.OQ.from("profiles").select("carrera").eq("id",e.id).single();(null==t?void 0:t.carrera)?i(t.carrera):i(null)}else i(null)}catch(e){console.error("Error loading user faculty:",e),i(null)}finally{d(!1)}};e();let{data:{subscription:t}}=s.OQ.auth.onAuthStateChange(async(t,a)=>{("SIGNED_IN"===t||"SIGNED_OUT"===t||"USER_UPDATED"===t)&&(r||d(!0),await e())});return()=>{null==t||t.unsubscribe()}},[]),(0,l.useEffect)(()=>{if(r&&r in n){let e=n[r];document.documentElement.style.setProperty("--faculty-primary",e.primary),document.documentElement.style.setProperty("--faculty-secondary",e.secondary),document.documentElement.style.setProperty("--faculty-dark",e.dark),document.documentElement.style.setProperty("--faculty-light",e.light)}},[r]);let m=r&&r in n?n[r]:n["Facultad de Ciencias Empresariales"];return(0,a.jsx)(o.Provider,{value:{faculty:r,colors:m,setFaculty:e=>{i(e)},loading:c,themeMode:u,setThemeMode:e=>{h(e),localStorage.setItem("themeMode",e),document.documentElement.setAttribute("data-theme",e)}},children:t})}},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{color:o="currentColor",size:i=24,strokeWidth:c=2,absoluteStrokeWidth:d,children:u,...h}=r;return(0,a.createElement)("svg",{ref:n,...l,width:i,height:i,stroke:o,strokeWidth:d?24*Number(c)/Number(i):c,className:"lucide lucide-".concat(s(e)),...h},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...(Array.isArray(u)?u:[u])||[]])});return r.displayName="".concat(e),r}},9554:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},2805:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]])},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8919:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9763).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[338,971,117,744],function(){return e(e.s=9576)}),_N_E=e.O()}]);