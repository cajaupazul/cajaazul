(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{9245:function(e,t,r){Promise.resolve().then(r.bind(r,3635))},3635:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var l=r(7437),a=r(2265),s=r(2141),o=r(4991),i=r(9660),n=r(5805),c=r(9397),d=r(3247),u=r(8728),b=r(6858),m=r(2489),p=r(7689),h=r(6540),x=r(7648),f=r(8239),g=r(7586),y=r(9235);function v(){let{profile:e}=(0,o.U)(),{colors:t}=(0,i.F)(),[r,v]=(0,a.useState)([]),[w,j]=(0,a.useState)(!0),[N,k]=(0,a.useState)(""),[C,E]=(0,a.useState)(!1),[_,F]=(0,a.useState)(null),[S,O]=(0,a.useState)({nombre:"",descripcion:"",tipo:"",link_whatsapp:""}),[I,D]=(0,a.useState)(null),[P,Q]=(0,a.useState)(null),[U,A]=(0,a.useState)(!1),[Z,q]=(0,a.useState)(!1),[G,L]=(0,a.useState)({}),[M,R]=(0,a.useState)(new Set),z=(0,a.useCallback)(async()=>{try{0===r.length&&j(!0);let{data:e,error:t}=await s.OQ.from("grupos").select("\n          *,\n          grupo_miembros(count)\n        ").order("created_at",{ascending:!1});if(t)throw t;v(e||[]);let l={};null==e||e.forEach(e=>{var t,r;l[e.id]=(null===(r=e.grupo_miembros)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.count)||0}),L(l)}catch(e){console.error("Error cargando grupos:",e)}finally{j(!1)}},[r.length]),T=(0,a.useCallback)(async()=>{if(null==e?void 0:e.id)try{let{data:t,error:r}=await s.OQ.from("grupo_miembros").select("grupo_id").eq("user_id",e.id);if(r)throw r;R(new Set((null==t?void 0:t.map(e=>e.grupo_id))||[]))}catch(e){console.error("Error cargando grupos del usuario:",e)}},[null==e?void 0:e.id]);(0,a.useEffect)(()=>{z()},[z]),(0,a.useEffect)(()=>{(null==e?void 0:e.id)&&T()},[null==e?void 0:e.id,T]);let J=()=>{let e=Date.now()+1e3,r=[(null==t?void 0:t.primary)||"#3b82f6","#ffffff"];!function t(){(0,y.Z)({particleCount:2,angle:60,spread:55,origin:{x:0},colors:r}),(0,y.Z)({particleCount:2,angle:120,spread:55,origin:{x:1},colors:r}),Date.now()<e&&requestAnimationFrame(t)}()},B=async(t,r)=>{t.preventDefault(),t.stopPropagation();try{let{error:t}=await s.OQ.from("grupo_miembros").insert([{grupo_id:r,user_id:null==e?void 0:e.id}]);if(t)throw t;R(e=>new Set([...e,r])),L(e=>({...e,[r]:(e[r]||0)+1})),J()}catch(e){console.error("Error uni\xe9ndose al grupo:",e)}},H=async(t,r)=>{if(t.preventDefault(),t.stopPropagation(),confirm("\xbfEst\xe1s seguro de abandonar este grupo?"))try{let{error:t}=await s.OQ.from("grupo_miembros").delete().eq("grupo_id",r).eq("user_id",null==e?void 0:e.id);if(t)throw t;let l=new Set(M);l.delete(r),R(l),L(e=>({...e,[r]:Math.max(0,(e[r]||0)-1)}))}catch(e){console.error("Error abandonando grupo:",e)}},Y=async(t,r)=>{if(!t||!(null==e?void 0:e.id))return null;let l=t.name.split(".").pop(),a="".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2),".").concat(l),o="".concat(e.id,"/").concat(a);try{let{error:e}=await s.OQ.storage.from("grupos").upload(o,t);if(e)throw e;let{data:r}=s.OQ.storage.from("grupos").getPublicUrl(o);return r.publicUrl}catch(e){return console.error("Error subiendo ".concat(r,":"),e),null}},X=async t=>{if(t.preventDefault(),!S.nombre||!S.tipo){alert("Por favor completa los campos requeridos");return}if(r.some(e=>e.tipo===S.tipo&&e.nombre===S.nombre&&e.id!==(null==_?void 0:_.id))){alert("Ya existe un grupo con este nombre y tipo");return}try{let t=null==_?void 0:_.logo_url,r=null==_?void 0:_.banner_url;I&&(A(!0),t=await Y(I,"logo"),A(!1)),P&&(q(!0),r=await Y(P,"banner"),q(!1));let l={nombre:S.nombre,descripcion:S.descripcion,tipo:S.tipo,link_whatsapp:S.link_whatsapp,logo_url:t,banner_url:r};if(_){let{error:e}=await s.OQ.from("grupos").update(l).eq("id",_.id);if(e)throw e}else{let{error:t}=await s.OQ.from("grupos").insert([{...l,created_by:null==e?void 0:e.id}]);if(t)throw t;J()}E(!1),O({nombre:"",descripcion:"",tipo:"",link_whatsapp:""}),D(null),Q(null),F(null),z()}catch(e){console.error("Error operando grupo:",e),alert("Ocurri\xf3 un error")}},V=(e,t)=>{e.preventDefault(),e.stopPropagation(),F(t),O({nombre:t.nombre,descripcion:t.descripcion||"",tipo:t.tipo,link_whatsapp:t.link_whatsapp||""}),E(!0)},W=r.filter(e=>e.nombre.toLowerCase().includes(N.toLowerCase())||e.tipo.toLowerCase().includes(N.toLowerCase()));return w?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-bb-dark",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-t-2",style:{borderColor:null==t?void 0:t.primary}}),(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,l.jsx)(n.Z,{className:"w-6 h-6 text-gray-400 opacity-50"})})]}),(0,l.jsx)("p",{className:"text-gray-400 mt-4 animate-pulse",children:"Cargando comunidad..."})]}):(0,l.jsxs)("div",{className:"min-h-screen bg-bb-dark p-8 relative overflow-hidden",children:[(0,l.jsxs)("div",{className:"max-w-7xl mx-auto relative z-10",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-4",children:[(0,l.jsxs)(f.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:[(0,l.jsxs)("h1",{className:"text-5xl font-black text-bb-text mb-2 tracking-tight flex items-center gap-3",children:["Grupos ",(0,l.jsx)("span",{className:"text-blue-400",children:"Universitarios"})]}),(0,l.jsx)("p",{className:"text-bb-text-secondary text-lg max-w-xl",children:"Conecta, aprende y divi\xe9rtete. \xdanete a comunidades lideradas por estudiantes como t\xfa."})]}),(0,l.jsxs)(f.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{F(null),O({nombre:"",descripcion:"",tipo:"",link_whatsapp:""}),D(null),Q(null),E(!0)},className:"flex items-center gap-2 px-8 py-4 rounded-xl font-bold text-white bg-blue-600 hover:bg-blue-500 transition-all",children:[(0,l.jsx)(c.Z,{className:"w-6 h-6"}),"Crear Nuevo Grupo"]})]}),(0,l.jsxs)(f.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-10 relative max-w-2xl",children:[(0,l.jsx)("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:(0,l.jsx)(d.Z,{className:"w-5 h-5 text-bb-text-secondary"})}),(0,l.jsx)("input",{type:"text",placeholder:"Buscar por nombre o categor\xeda...",value:N,onChange:e=>k(e.target.value),className:"w-full pl-12 pr-4 py-4 rounded-xl bg-bb-card border border-bb-border text-bb-text placeholder:text-bb-text-secondary focus:outline-none focus:border-blue-500/50 transition-all"})]}),0===W.length?(0,l.jsxs)(f.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,l.jsx)("div",{className:"bg-white/5 p-8 rounded-full mb-6",children:(0,l.jsx)(n.Z,{className:"w-16 h-16 text-gray-500"})}),(0,l.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"No encontramos grupos"}),(0,l.jsx)("p",{className:"text-gray-400",children:"S\xe9 el primero en crear uno para esta categor\xeda."})]}):(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:(0,l.jsx)(g.M,{children:W.map((r,a)=>{let s=M.has(r.id),o=r.created_by===(null==e?void 0:e.id);return(0,l.jsx)(f.E.div,{layout:!0,initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9},transition:{duration:.3,delay:.05*a},children:(0,l.jsxs)(x.default,{href:"/dashboard/grupos/".concat(r.id),className:"group block h-full rounded-2xl overflow-hidden bg-bb-card border border-bb-border hover:border-blue-500/30 transition-all shadow-xl hover:shadow-2xl relative",children:[(0,l.jsxs)("div",{className:"h-40 relative overflow-hidden",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110",style:{backgroundImage:r.banner_url?"url(".concat(r.banner_url,")"):void 0,backgroundColor:(null==t?void 0:t.secondary)||"#1e293b"}}),(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-bb-card to-transparent"}),o&&(0,l.jsx)("button",{onClick:e=>V(e,r),className:"absolute top-3 right-3 p-2 rounded-full bg-black/60 hover:bg-black/80 text-white backdrop-blur-md transition-all opacity-0 group-hover:opacity-100",children:(0,l.jsx)(u.Z,{className:"w-4 h-4"})}),(0,l.jsx)("div",{className:"absolute bottom-4 left-4 right-4 flex justify-between items-end",children:(0,l.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-black/60 backdrop-blur text-white border border-white/10",children:r.tipo})})]}),(0,l.jsxs)("div",{className:"p-6 pt-12 relative",children:[(0,l.jsx)("div",{className:"absolute -top-10 left-6",children:(0,l.jsx)(f.E.div,{whileHover:{rotate:5,scale:1.1},className:"w-20 h-20 rounded-2xl border-4 border-bb-card bg-bb-card shadow-lg overflow-hidden flex items-center justify-center text-2xl font-bold text-white",style:{backgroundColor:r.logo_url?"transparent":(null==t?void 0:t.primary)||"#3b82f6"},children:r.logo_url?(0,l.jsx)("img",{src:r.logo_url,alt:r.nombre,className:"w-full h-full object-cover"}):r.nombre.charAt(0).toUpperCase()})}),(0,l.jsx)("div",{className:"flex justify-between items-start mb-2 pl-24",children:(0,l.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-400 bg-white/5 px-2 py-1 rounded-lg",children:[(0,l.jsx)(n.Z,{className:"w-3.5 h-3.5"}),G[r.id]||0]})}),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-white mb-2 line-clamp-1 group-hover:text-blue-400 transition-colors",children:r.nombre}),(0,l.jsx)("p",{className:"text-sm text-gray-400 line-clamp-2 mb-6 h-10",children:r.descripcion||"Sin descripci\xf3n disponible."}),(0,l.jsx)("div",{className:"flex gap-3 mt-auto",children:s?(0,l.jsx)("button",{onClick:e=>H(e,r.id),className:"flex-1 px-4 py-2.5 rounded-xl bg-red-500/10 hover:bg-red-500/20 text-red-500 font-semibold transition-all text-sm border border-red-500/20",children:"Abandonar"}):(0,l.jsxs)(f.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e=>B(e,r.id),className:"flex-1 px-4 py-2.5 rounded-xl font-bold text-sm text-white shadow-lg transition-all flex items-center justify-center gap-2",style:{backgroundColor:(null==t?void 0:t.primary)||"#3b82f6"},children:["Unirse",(0,l.jsx)(b.Z,{className:"w-4 h-4 opacity-50"})]})})]})]})]})},r.id)})})})]}),(0,l.jsx)(g.M,{children:C&&(0,l.jsx)(f.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,l.jsx)(f.E.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-[#242424] rounded-3xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-white/10 shadow-2xl",children:(0,l.jsxs)("div",{className:"p-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-8 border-b border-white/5 pb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-3xl font-bold text-white",children:_?"Editar Grupo":"Crear Comunidad"}),(0,l.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Comparte tus intereses con toda la universidad."})]}),(0,l.jsx)("button",{onClick:()=>E(!1),className:"p-2 hover:bg-white/10 rounded-full transition-all text-gray-400 hover:text-white",children:(0,l.jsx)(m.Z,{className:"w-6 h-6"})})]}),(0,l.jsxs)("form",{onSubmit:X,className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Nombre"}),(0,l.jsx)("input",{type:"text",value:S.nombre,onChange:e=>O({...S,nombre:e.target.value}),placeholder:"Ej: Club de Ajedrez",className:"w-full px-4 py-3 rounded-xl bg-black/40 border border-white/10 text-white focus:outline-none focus:border-blue-500 transition-colors"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Categor\xeda"}),(0,l.jsx)("input",{type:"text",value:S.tipo,onChange:e=>O({...S,tipo:e.target.value}),placeholder:"Ej: Deporte, Arte...",className:"w-full px-4 py-3 rounded-xl bg-black/40 border border-white/10 text-white focus:outline-none focus:border-blue-500 transition-colors"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Descripci\xf3n"}),(0,l.jsx)("textarea",{value:S.descripcion,onChange:e=>O({...S,descripcion:e.target.value}),placeholder:"\xbfDe qu\xe9 trata este grupo?",rows:4,className:"w-full px-4 py-3 rounded-xl bg-black/40 border border-white/10 text-white focus:outline-none focus:border-blue-500 transition-colors resize-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"WhatsApp / Discord Link"}),(0,l.jsx)("input",{type:"url",value:S.link_whatsapp,onChange:e=>O({...S,link_whatsapp:e.target.value}),placeholder:"https://...",className:"w-full px-4 py-3 rounded-xl bg-black/40 border border-white/10 text-white focus:outline-none focus:border-blue-500 transition-colors"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsx)("div",{className:"p-4 rounded-xl border-2 border-dashed border-white/10 hover:border-blue-500/50 transition-colors bg-white/5 text-center",children:(0,l.jsxs)("label",{className:"cursor-pointer block",children:[(0,l.jsx)("span",{className:"block text-xs font-bold text-gray-400 mb-2",children:"LOGO DEL GRUPO"}),(0,l.jsx)("div",{className:"w-16 h-16 mx-auto bg-black/50 rounded-lg flex items-center justify-center mb-2",children:I?(0,l.jsx)("img",{src:URL.createObjectURL(I),className:"w-full h-full object-cover rounded-lg"}):(0,l.jsx)(p.Z,{className:"text-gray-500"})}),(0,l.jsx)("span",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:I?"Cambiar imagen":"Subir imagen"}),(0,l.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;return D((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}})]})}),(0,l.jsx)("div",{className:"p-4 rounded-xl border-2 border-dashed border-white/10 hover:border-blue-500/50 transition-colors bg-white/5 text-center",children:(0,l.jsxs)("label",{className:"cursor-pointer block",children:[(0,l.jsx)("span",{className:"block text-xs font-bold text-gray-400 mb-2",children:"PORTADA GRANDE"}),(0,l.jsx)("div",{className:"w-full h-16 mx-auto bg-black/50 rounded-lg flex items-center justify-center mb-2 overflow-hidden",children:P?(0,l.jsx)("img",{src:URL.createObjectURL(P),className:"w-full h-full object-cover"}):(0,l.jsx)(p.Z,{className:"text-gray-500"})}),(0,l.jsx)("span",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:P?"Cambiar banner":"Subir banner"}),(0,l.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;return Q((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}})]})})]}),(0,l.jsxs)("div",{className:"flex gap-4 justify-end pt-6 border-t border-white/10 mt-6",children:[(0,l.jsx)("button",{type:"button",onClick:()=>E(!1),className:"px-6 py-3 rounded-xl font-bold text-gray-400 hover:bg-white/5 transition-all",children:"Cancelar"}),(0,l.jsx)("button",{type:"submit",disabled:U||Z,className:"px-8 py-3 rounded-xl font-bold text-white shadow-lg shadow-blue-600/20 hover:shadow-blue-600/40 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:(null==t?void 0:t.primary)||"#3b82f6"},children:U||Z?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Z,{className:"w-4 h-4 animate-spin"}),"Procesando..."]}):_?"Guardar Cambios":"Crear Grupo"})]})]})]})})})})]})}},4991:function(e,t,r){"use strict";r.d(t,{ProfileProvider:function(){return i},U:function(){return n}});var l=r(7437),a=r(2265),s=r(2141);let o=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,a.useState)(null),[n,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(null),b=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=!0;(async()=>{try{let{data:{user:t}}=await s.OQ.auth.getUser();if(!e)return;if(t){u(t.id);let{data:r,error:l}=await s.OQ.from("profiles").select("*").eq("id",t.id).single();if(!e)return;l?(console.error("Error loading profile:",l),i(null)):r&&i(r),b.current&&b.current.unsubscribe(),b.current=s.OQ.channel("profile_".concat(t.id,"_").concat(Date.now())).on("postgres_changes",{event:"*",schema:"public",table:"profiles",filter:"id=eq.".concat(t.id)},r=>{var l;e&&(null===(l=r.new)||void 0===l?void 0:l.id)===t.id&&i(r.new)}).subscribe(e=>{"SUBSCRIBED"===e&&console.log("Profile subscription active for user:",t.id)})}else i(null),u(null)}catch(t){console.error("Error initializing profile:",t),e&&i(null)}finally{e&&c(!1)}})();let{data:{subscription:t}}=s.OQ.auth.onAuthStateChange(async(t,l)=>{if(e){if("SIGNED_IN"===t&&(null==l?void 0:l.user)){u(l.user.id),r||c(!0);let{data:t,error:a}=await s.OQ.from("profiles").select("*").eq("id",l.user.id).single();e&&(t&&i(t),c(!1))}else"SIGNED_OUT"===t&&(i(null),u(null),b.current&&b.current.unsubscribe())}});return()=>{e=!1,null==t||t.unsubscribe(),b.current&&b.current.unsubscribe()}},[]);let m=async()=>{if(d)try{let{data:e}=await s.OQ.from("profiles").select("*").eq("id",d).single();e&&i(e)}catch(e){console.error("Error refreshing profile:",e)}finally{c(!1)}};return(0,l.jsx)(o.Provider,{value:{profile:r,loading:n,updateProfile:e=>{e.id===d&&(i(e),s.OQ.from("profiles").update({avatar_url:e.avatar_url,background_url:e.background_url}).eq("id",d).then(e=>{let{error:t}=e;t&&console.error("Error updating profile:",t)}))},refreshProfile:m},children:t})}function n(){let e=(0,a.useContext)(o);if(!e)throw Error("useProfile must be used within ProfileProvider");return e}},2141:function(e,t,r){"use strict";r.d(t,{OQ:function(){return l}});let l=(0,r(1545).eI)("https://mevfhlhwrrkbhppgeyaj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1ldmZobGh3cnJrYmhwcGdleWFqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5NDgyMDIsImV4cCI6MjA3NzUyNDIwMn0.E_Rhnhh8dbRiBLTg52HpDfJSqv2Q_hE-mSjHlkLF2IE")},9660:function(e,t,r){"use strict";r.d(t,{F:function(){return n},ThemeProvider:function(){return c}});var l=r(7437),a=r(2265),s=r(2141);let o={"Facultad de Ciencias Empresariales":{primary:"#0066FF",secondary:"#E6F0FF",dark:"#0052CC",light:"#F0F7FF"},"Facultad de Derecho":{primary:"#FF0000",secondary:"#FFE6E6",dark:"#CC0000",light:"#FFF0F0"},"Facultad de Econom\xeda y Finanzas":{primary:"#00CC00",secondary:"#E6FFE6",dark:"#009900",light:"#F0FFF0"},"Facultad de Ingenier\xeda":{primary:"#FFCC00",secondary:"#FFFAE6",dark:"#CC9900",light:"#FFFBF0"}},i=(0,a.createContext)({faculty:null,colors:null,setFaculty:()=>{},loading:!0,themeMode:"glass",setThemeMode:()=>{}}),n=()=>(0,a.useContext)(i);function c(e){let{children:t}=e,[r,n]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),[u,b]=(0,a.useState)("glass");(0,a.useEffect)(()=>{let e=localStorage.getItem("themeMode");e&&["light","dark","glass"].includes(e)?(b(e),document.documentElement.setAttribute("data-theme",e)):(b("glass"),document.documentElement.setAttribute("data-theme","glass"))},[]),(0,a.useEffect)(()=>{let e=async()=>{try{let{data:{user:e}}=await s.OQ.auth.getUser();if(e){let{data:t}=await s.OQ.from("profiles").select("carrera").eq("id",e.id).single();(null==t?void 0:t.carrera)?n(t.carrera):n(null)}else n(null)}catch(e){console.error("Error loading user faculty:",e),n(null)}finally{d(!1)}};e();let{data:{subscription:t}}=s.OQ.auth.onAuthStateChange(async(t,l)=>{("SIGNED_IN"===t||"SIGNED_OUT"===t||"USER_UPDATED"===t)&&(r||d(!0),await e())});return()=>{null==t||t.unsubscribe()}},[]),(0,a.useEffect)(()=>{if(r&&r in o){let e=o[r];document.documentElement.style.setProperty("--faculty-primary",e.primary),document.documentElement.style.setProperty("--faculty-secondary",e.secondary),document.documentElement.style.setProperty("--faculty-dark",e.dark),document.documentElement.style.setProperty("--faculty-light",e.light)}},[r]);let m=r&&r in o?o[r]:o["Facultad de Ciencias Empresariales"];return(0,l.jsx)(i.Provider,{value:{faculty:r,colors:m,setFaculty:e=>{n(e)},loading:c,themeMode:u,setThemeMode:e=>{b(e),localStorage.setItem("themeMode",e),document.documentElement.setAttribute("data-theme",e)}},children:t})}}},function(e){e.O(0,[545,451,239,655,971,117,744],function(){return e(e.s=9245)}),_N_E=e.O()}]);