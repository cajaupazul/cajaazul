(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{1656:function(e,r,t){Promise.resolve().then(t.bind(t,492))},492:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return m}});var l=t(7437),a=t(2265),s=t(4991),i=t(2141),n=t(8728),o=t(9763);let d=(0,o.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var c=t(4766),u=t(6337);let b=(0,o.Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var x=t(3581),h=t(3229),f=t(7692);function m(){var e;let{profile:r,refreshProfile:t}=(0,s.U)(),[o,m]=(0,a.useState)(!1),[p,v]=(0,a.useState)({nombre:(null==r?void 0:r.nombre)||"",carrera:(null==r?void 0:r.carrera)||"",universidad:(null==r?void 0:r.universidad)||"",bio:(null==r?void 0:r.bio)||""}),g=async()=>{if(null==r?void 0:r.id){m(!0);try{let{error:e}=await i.OQ.from("profiles").update(p).eq("id",r.id);if(e)throw e;await t(),alert("Perfil actualizado con \xe9xito")}catch(e){console.error("Error actualizando perfil:",e),alert("Ocurri\xf3 un error al actualizar")}finally{m(!1)}}};return(0,l.jsx)("div",{className:"min-h-screen bg-bb-dark p-8",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-10",children:[(0,l.jsx)("div",{className:"p-3 bg-blue-600/20 rounded-2xl",children:(0,l.jsx)(n.Z,{className:"w-8 h-8 text-blue-400"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-4xl font-black text-bb-text tracking-tight",children:"Configuraci\xf3n"}),(0,l.jsx)("p",{className:"text-bb-text-secondary",children:"Gestiona tu perfil y preferencias de cuenta"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,l.jsx)("div",{className:"space-y-2",children:[{label:"Perfil P\xfablico",icon:d,active:!0},{label:"Notificaciones",icon:c.Z},{label:"Seguridad",icon:u.Z},{label:"Dispositivos",icon:b}].map((e,r)=>(0,l.jsxs)("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ".concat(e.active?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-bb-text-secondary hover:bg-white/5 hover:text-bb-text"),children:[(0,l.jsx)(e.icon,{className:"w-5 h-5"}),e.label]},r))}),(0,l.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,l.jsxs)("div",{className:"bg-bb-card border border-bb-border rounded-3xl p-8 shadow-xl",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-bb-text mb-6",children:"Informaci\xf3n del Perfil"}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-6 mb-8 p-4 bg-white/5 rounded-2xl",children:[(0,l.jsxs)("div",{className:"relative group",children:[(0,l.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-blue-600 flex items-center justify-center text-3xl font-bold text-white overflow-hidden border-4 border-bb-card shadow-lg",children:(null==r?void 0:r.avatar_url)?(0,l.jsx)("img",{src:r.avatar_url,className:"w-full h-full object-cover",alt:"Profile"}):null==r?void 0:null===(e=r.nombre)||void 0===e?void 0:e.charAt(0)}),(0,l.jsx)("button",{className:"absolute -bottom-2 -right-2 p-2 bg-blue-500 rounded-lg text-white shadow-lg hover:scale-110 transition-transform",children:(0,l.jsx)(x.Z,{className:"w-4 h-4"})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-bold text-bb-text text-lg",children:null==r?void 0:r.nombre}),(0,l.jsx)("p",{className:"text-bb-text-secondary text-sm",children:null==r?void 0:r.carrera})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-bold text-bb-text-secondary uppercase tracking-widest mb-2",children:"Nombre Completo"}),(0,l.jsx)("input",{type:"text",value:p.nombre,onChange:e=>v({...p,nombre:e.target.value}),className:"w-full px-4 py-3 rounded-xl bg-bb-darker border border-bb-border text-bb-text focus:border-blue-500/50 transition-all outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-bold text-bb-text-secondary uppercase tracking-widest mb-2",children:"Carrera"}),(0,l.jsx)("input",{type:"text",value:p.carrera,onChange:e=>v({...p,carrera:e.target.value}),className:"w-full px-4 py-3 rounded-xl bg-bb-darker border border-bb-border text-bb-text focus:border-blue-500/50 transition-all outline-none"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-bold text-bb-text-secondary uppercase tracking-widest mb-2",children:"Universidad"}),(0,l.jsx)("input",{type:"text",value:p.universidad,onChange:e=>v({...p,universidad:e.target.value}),className:"w-full px-4 py-3 rounded-xl bg-bb-darker border border-bb-border text-bb-text focus:border-blue-500/50 transition-all outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-bold text-bb-text-secondary uppercase tracking-widest mb-2",children:"Biograf\xeda"}),(0,l.jsx)("textarea",{rows:4,value:p.bio,onChange:e=>v({...p,bio:e.target.value}),placeholder:"Cu\xe9ntanos algo sobre ti...",className:"w-full px-4 py-3 rounded-xl bg-bb-darker border border-bb-border text-bb-text focus:border-blue-500/50 transition-all outline-none resize-none"})]}),(0,l.jsx)("div",{className:"pt-6 border-t border-bb-border flex justify-end",children:(0,l.jsxs)("button",{onClick:g,disabled:o,className:"flex items-center gap-2 px-8 py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl shadow-lg shadow-blue-600/20 transition-all disabled:opacity-50",children:[o?(0,l.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white animate-spin rounded-full"}):(0,l.jsx)(h.Z,{className:"w-5 h-5"}),"Guardar Cambios"]})})]})]}),(0,l.jsxs)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-3xl p-8",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-red-500 mb-2",children:"Zona de Peligro"}),(0,l.jsx)("p",{className:"text-bb-text-secondary text-sm mb-6",children:"Ten cuidado, estas acciones son irreversibles."}),(0,l.jsxs)("button",{className:"flex items-center gap-2 px-6 py-3 bg-red-500/20 hover:bg-red-500/30 text-red-500 font-bold rounded-xl border border-red-500/30 transition-all",children:[(0,l.jsx)(f.Z,{className:"w-5 h-5"}),"Cerrar Sesi\xf3n en otros dispositivos"]})]})]})]})]})})}},4991:function(e,r,t){"use strict";t.d(r,{ProfileProvider:function(){return n},U:function(){return o}});var l=t(7437),a=t(2265),s=t(2141);let i=(0,a.createContext)(void 0);function n(e){let{children:r}=e,[t,n]=(0,a.useState)(null),[o,d]=(0,a.useState)(!0),[c,u]=(0,a.useState)(null),b=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=!0;(async()=>{try{let{data:{user:r}}=await s.OQ.auth.getUser();if(!e)return;if(r){u(r.id);let{data:t,error:l}=await s.OQ.from("profiles").select("*").eq("id",r.id).single();if(!e)return;l?(console.error("Error loading profile:",l),n(null)):t&&n(t),b.current&&b.current.unsubscribe(),b.current=s.OQ.channel("profile_".concat(r.id,"_").concat(Date.now())).on("postgres_changes",{event:"*",schema:"public",table:"profiles",filter:"id=eq.".concat(r.id)},t=>{var l;e&&(null===(l=t.new)||void 0===l?void 0:l.id)===r.id&&n(t.new)}).subscribe(e=>{"SUBSCRIBED"===e&&console.log("Profile subscription active for user:",r.id)})}else n(null),u(null)}catch(r){console.error("Error initializing profile:",r),e&&n(null)}finally{e&&d(!1)}})();let{data:{subscription:r}}=s.OQ.auth.onAuthStateChange(async(r,l)=>{if(e){if("SIGNED_IN"===r&&(null==l?void 0:l.user)){u(l.user.id),t||d(!0);let{data:r,error:a}=await s.OQ.from("profiles").select("*").eq("id",l.user.id).single();e&&(r&&n(r),d(!1))}else"SIGNED_OUT"===r&&(n(null),u(null),b.current&&b.current.unsubscribe())}});return()=>{e=!1,null==r||r.unsubscribe(),b.current&&b.current.unsubscribe()}},[]);let x=async()=>{if(c)try{let{data:e}=await s.OQ.from("profiles").select("*").eq("id",c).single();e&&n(e)}catch(e){console.error("Error refreshing profile:",e)}finally{d(!1)}};return(0,l.jsx)(i.Provider,{value:{profile:t,loading:o,updateProfile:e=>{e.id===c&&(n(e),s.OQ.from("profiles").update({avatar_url:e.avatar_url,background_url:e.background_url}).eq("id",c).then(e=>{let{error:r}=e;r&&console.error("Error updating profile:",r)}))},refreshProfile:x},children:r})}function o(){let e=(0,a.useContext)(i);if(!e)throw Error("useProfile must be used within ProfileProvider");return e}},2141:function(e,r,t){"use strict";t.d(r,{OQ:function(){return l}});let l=(0,t(1545).eI)("https://mevfhlhwrrkbhppgeyaj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1ldmZobGh3cnJrYmhwcGdleWFqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5NDgyMDIsImV4cCI6MjA3NzUyNDIwMn0.E_Rhnhh8dbRiBLTg52HpDfJSqv2Q_hE-mSjHlkLF2IE")},9763:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var l=t(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(e,r)=>{let t=(0,l.forwardRef)((t,i)=>{let{color:n="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:c,children:u,...b}=t;return(0,l.createElement)("svg",{ref:i,...a,width:o,height:o,stroke:n,strokeWidth:c?24*Number(d)/Number(o):d,className:"lucide lucide-".concat(s(e)),...b},[...r.map(e=>{let[r,t]=e;return(0,l.createElement)(r,t)}),...(Array.isArray(u)?u:[u])||[]])});return t.displayName="".concat(e),t}},4766:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});let l=(0,t(9763).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},3581:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});let l=(0,t(9763).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},6337:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});let l=(0,t(9763).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},7692:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});let l=(0,t(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3229:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});let l=(0,t(9763).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},8728:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});let l=(0,t(9763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},function(e){e.O(0,[545,971,117,744],function(){return e(e.s=1656)}),_N_E=e.O()}]);